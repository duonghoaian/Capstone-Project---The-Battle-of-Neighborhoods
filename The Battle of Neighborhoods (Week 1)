{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "# Coursera Capstone Project\n",
    "## The Battle of Neighborhoods (Week 1)\n",
    "### Duong Hoai AN - Part 1 : Introduction and Data Sections"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Solving environment: done\n",
      "\n",
      "## Package Plan ##\n",
      "\n",
      "  environment location: /opt/conda/envs/Python36\n",
      "\n",
      "  added / updated specs: \n",
      "    - folium=0.5.0\n",
      "\n",
      "\n",
      "The following packages will be downloaded:\n",
      "\n",
      "    package                    |            build\n",
      "    ---------------------------|-----------------\n",
      "    ca-certificates-2019.6.16  |       hecc5488_0         145 KB  conda-forge\n",
      "    branca-0.3.1               |             py_0          25 KB  conda-forge\n",
      "    altair-3.2.0               |           py36_0         770 KB  conda-forge\n",
      "    vincent-0.4.4              |             py_1          28 KB  conda-forge\n",
      "    openssl-1.1.1c             |       h516909a_0         2.1 MB  conda-forge\n",
      "    certifi-2019.6.16          |           py36_1         149 KB  conda-forge\n",
      "    folium-0.5.0               |             py_0          45 KB  conda-forge\n",
      "    ------------------------------------------------------------\n",
      "                                           Total:         3.3 MB\n",
      "\n",
      "The following NEW packages will be INSTALLED:\n",
      "\n",
      "    altair:          3.2.0-py36_0      conda-forge\n",
      "    branca:          0.3.1-py_0        conda-forge\n",
      "    folium:          0.5.0-py_0        conda-forge\n",
      "    vincent:         0.4.4-py_1        conda-forge\n",
      "\n",
      "The following packages will be UPDATED:\n",
      "\n",
      "    ca-certificates: 2019.5.15-1                   --> 2019.6.16-hecc5488_0 conda-forge\n",
      "    certifi:         2019.6.16-py36_1              --> 2019.6.16-py36_1     conda-forge\n",
      "\n",
      "The following packages will be DOWNGRADED:\n",
      "\n",
      "    openssl:         1.1.1c-h7b6447c_1             --> 1.1.1c-h516909a_0    conda-forge\n",
      "\n",
      "\n",
      "Downloading and Extracting Packages\n",
      "ca-certificates-2019 | 145 KB    | ##################################### | 100% \n",
      "branca-0.3.1         | 25 KB     | ##################################### | 100% \n",
      "altair-3.2.0         | 770 KB    | ##################################### | 100% \n",
      "vincent-0.4.4        | 28 KB     | ##################################### | 100% \n",
      "openssl-1.1.1c       | 2.1 MB    | ##################################### | 100% \n",
      "certifi-2019.6.16    | 149 KB    | ##################################### | 100% \n",
      "folium-0.5.0         | 45 KB     | ##################################### | 100% \n",
      "Preparing transaction: done\n",
      "Verifying transaction: done\n",
      "Executing transaction: done\n",
      "Libraries imported.\n"
     ]
    }
   ],
   "source": [
    "import numpy as np # library to handle data in a vectorized manner\n",
    "import time\n",
    "import pandas as pd # library for data analsysis\n",
    "pd.set_option('display.max_columns', None)\n",
    "pd.set_option('display.max_rows', None)\n",
    "\n",
    "import json # library to handle JSON files\n",
    "import requests # library to handle requests\n",
    "from pandas.io.json import json_normalize # tranform JSON file into a pandas dataframe\n",
    "\n",
    "from geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n",
    "!conda install -c conda-forge folium=0.5.0 --yes # uncomment this line if you haven't completed the Foursquare API lab\n",
    "import folium # map rendering library\n",
    "\n",
    "print('Libraries imported.')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "\n",
    "### Coursera Capstone - REPORT CONTENT\n",
    "\n",
    "1.Introduction Section : ⁃ Discussion of the business problem and the interested audience in this project.\n",
    "\n",
    "2.Data Section:\n",
    "⁃ Description of the data that will be used to solve the problem and the sources.\n",
    "\n",
    "3.Methodology section ⁃ Discussion and description of exploratory data analysis carried out, any inferential statistical testing\n",
    "performed, and if any machine learnings were used establishing the strategy and purposes.\n",
    "\n",
    "4.Results section ⁃ Discussion of the results.\n",
    "\n",
    "5.Discussion section ⁃ Elaboration and discussion on any observations noted and any recommendations suggested based on the results.\n",
    "\n",
    "6.Conclusion section ⁃ Report Conclusion."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "# A description of the problem and a discussion of the background. (15 marks)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 1. Introduction Section :\n",
    "\n",
    "### Discussion of the business problem and the audience who would be interested in this project.\n",
    "\n",
    "### Description of the Problem and Background\n",
    "\n",
    "### Scenario:"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "I am a business analyst residing in Southbank Melbourne. I currently live within walking distance to Melbourne CBD and Flinders station and I enjoy many amenities and venues in the area, such as various international cuisine restaurants, cafes, shopping malls and entertainment. I currently work in a bank within walking distance to my home. However, I have been offered an opportunity to work for a leading consulting firm in  Manhattan, NY. They will leverage my BA skills and newly acquired data science to help their business analytics team. I am unsure about taking the role and would like to use this opportunity to dedicate my final coursera project into investigating advantages and disadvatanges of taking this offer.The key question is : How much do I need to spend in comparison to Melbourne to find an apartment with my girl friend which is as convenient and affordable as mine in Melbourne, considering the salary difference. I can use available real estate websites and Google but the idea is to use and apply myself the learned tools during the course. In order to make a comparison and evaluation of the rental options in Manhattan NY, I must set some basis, therefore the apartment in Manhattan must meet the following demands:\n",
    "\n",
    "* Apartment must be 2 or 3 bedrooms\n",
    "* Desired location is near a metro station in the Manhattan area and within  (1.5 km) radius or less than 30 minutes walking distance. \n",
    "* Price of rent not exceed $6,000 per month\n",
    "* Top amenities in the selected neighborhood shall be similar to current residence\n",
    "* Desirable to have venues such as coffee shops, Asian and Japanese/Korean Restaurants, gym and Grocery stores nearby.\n",
    "* As a reference, I have included a map of venues near current residence in Melbourne."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Business Problem:\n",
    "The challenge is to find a suitable apartment for rent in Manhattan NY that complies with the demands on location, price and venues. The data required to resolve this challenge is described in section 2 below."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Interested Audience\n",
    "I believe this is a relevant challenge with valid questions for anyone moving to other large city in the US, EU or Asia. The same methodology can be applied in accordance to demands as applicable. This case is also applicable for anyone interested in exploring starting or locating a new business in any city. Lastly, it can also serve as a good practical exercise to develop Data Science skills."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "# A description of the data and how it will be used to solve the problem. (15 marks)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "\n",
    "## 2. Data Section:\n",
    "\n",
    "### Description of the data and its sources that will be used to solve the problem\n",
    "\n",
    "### Description of the Data:"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The following data is required to answer the issues of the problem:\n",
    "\n",
    "* List of Boroughs and neighborhoods of Manhattan with their geodata (latitude and longitude)\n",
    "* List of Subway metro stations in Manhattan with their relative location\n",
    "* List of apartments for rent in Manhattan area with their addresses and price\n",
    "* Preferably, a list of apartments for rent with additional information, such as price, address, area, # of beds\n",
    "* Venues for each Manhattan neighborhoods ( that can be clustered)\n",
    "* Venues for subway metro stations"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### How the data will be used to solve the problem\n",
    "The data will be used as follows:\n",
    "\n",
    "* Use Foursquare and geopy data to map top 10 venues for all Manhattan neighborhoods and clustered in groups ( as per Course LAB)\n",
    "* Use foursquare and geopy data to map the location of subway metro stations , separately and on top of the above clustered map in order to be able to identify the venues and amenities near each metro station, or explore each subway location separately\n",
    "* Use Foursquare and geopy data to map the location of rental places, in some form, linked to the subway locations.\n",
    "* create a map that depicts, for instance, the average rental price per square ft, around a radious of (1.5 km) around each subway station - or a similar metric. I will be able to quickly point to the popups to know the relative price per subway area.\n",
    "* Addresses from rental locations will be converted to geodata( lat, long) using Geopy-distance and Nominatim.\n",
    "* Data will be searched in open data sources if available, from real estate sites if open to reading, libraries or other government agencies such as Metro New York MTA, etc.\n",
    "\n",
    "The procesing of these DATA will allow to answer the key questions to make a decision:\n",
    "\n",
    "* what is the cost of rent (per square ft) around a mile radius from each subway metro station?\n",
    "* what is the area of Manhattan with best rental pricing that meets criteria established?\n",
    "* What is the distance from work place ( Park Ave and 53 rd St) and the tentative future home?\n",
    "* What are the venues of the two best places to live? How the prices compare?\n",
    "* How venues distribute among Manhattan neighborhoods and around metro stations?\n",
    "* Are there tradeoffs between size and price and location?\n",
    "* Any other interesting statistical data findings of the real estate and overall data.\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Reference of venues around current residence in Melbourne for comparison to Manhattan place\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/opt/conda/envs/Python36/lib/python3.6/site-packages/ipykernel/__main__.py:4: DeprecationWarning: Using Nominatim with the default \"geopy/1.18.1\" `user_agent` is strongly discouraged, as it violates Nominatim's ToS https://operations.osmfoundation.org/policies/nominatim/ and may possibly cause 403 and 429 HTTP errors. Please specify a custom `user_agent` with `Nominatim(user_agent=\"my-application\")` or by overriding the default `user_agent`: `geopy.geocoders.options.default_user_agent = \"my-application\"`. In geopy 2.0 this will become an exception.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The geograpical coordinate of Melbourne home are -37.8212898, 144.9644173.\n"
     ]
    }
   ],
   "source": [
    "# Riverside Quay Southbank (Riverside Quay) Southbank VIC 3006 Australia\n",
    "address = 'Riverside Quay, Southbank'\n",
    "\n",
    "geolocator = Nominatim()\n",
    "location = geolocator.geocode(address)\n",
    "latitude = location.latitude\n",
    "longitude = location.longitude\n",
    "print('The geograpical coordinate of Melbourne home are {}, {}.'.format(latitude, longitude))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "neighborhood_latitude=-37.8212898\n",
    "neighborhood_longitude=144.9644173"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Your credentails:\n",
      "CLIENT_ID: CETGLD3C3BHQLWQYAVNIGTTHRNOCSMO3GDQ1KYN3V0RPQZVA\n",
      "CLIENT_SECRET:X5CYNQD03LMAYUQNXYVHWUSI3D24LHWL1MN12OVWN5HKJP3K\n"
     ]
    }
   ],
   "source": [
    "LIMIT = 100 # limit of number of venues returned by Foursquare API\n",
    "radius = 500 # define radius\n",
    "CLIENT_ID = 'CETGLD3C3BHQLWQYAVNIGTTHRNOCSMO3GDQ1KYN3V0RPQZVA' # My Foursquare ID\n",
    "CLIENT_SECRET = 'X5CYNQD03LMAYUQNXYVHWUSI3D24LHWL1MN12OVWN5HKJP3K' # My Foursquare Secret\n",
    "VERSION = '20180604'\n",
    "print('Your credentails:')\n",
    "print('CLIENT_ID: ' + CLIENT_ID)\n",
    "print('CLIENT_SECRET:' + CLIENT_SECRET)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'https://api.foursquare.com/v2/venues/explore?&client_id=CETGLD3C3BHQLWQYAVNIGTTHRNOCSMO3GDQ1KYN3V0RPQZVA&client_secret=X5CYNQD03LMAYUQNXYVHWUSI3D24LHWL1MN12OVWN5HKJP3K&v=20180604&ll=-37.8212898,144.9644173&radius=500&limit=100'"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "url= 'https://api.foursquare.com/v2/venues/explore?&client_id=CETGLD3C3BHQLWQYAVNIGTTHRNOCSMO3GDQ1KYN3V0RPQZVA&client_secret=X5CYNQD03LMAYUQNXYVHWUSI3D24LHWL1MN12OVWN5HKJP3K&v=20180604&ll=-37.8212898,144.9644173&radius=500&limit=100'\n",
    "url # display URL\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [],
   "source": [
    "results = requests.get(url).json()\n",
    "#results"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Function that extracts the category of the venues near Southbank - borrow from the Foursquare lab."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [],
   "source": [
    "\n",
    "# function that extracts the category of the venue\n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>name</th>\n",
       "      <th>categories</th>\n",
       "      <th>lat</th>\n",
       "      <th>lng</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Southbank Promenade</td>\n",
       "      <td>Pedestrian Plaza</td>\n",
       "      <td>-37.819959</td>\n",
       "      <td>144.965467</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Ponyfish Island</td>\n",
       "      <td>Bar</td>\n",
       "      <td>-37.819918</td>\n",
       "      <td>144.965021</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Yarra River</td>\n",
       "      <td>River</td>\n",
       "      <td>-37.819684</td>\n",
       "      <td>144.965115</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Eureka Skydeck 88</td>\n",
       "      <td>Scenic Lookout</td>\n",
       "      <td>-37.821589</td>\n",
       "      <td>144.964594</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>The Langham</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>-37.820370</td>\n",
       "      <td>144.965710</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Soho Melbourne</td>\n",
       "      <td>Italian Restaurant</td>\n",
       "      <td>-37.820609</td>\n",
       "      <td>144.963152</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>ENA greek street food</td>\n",
       "      <td>Greek Restaurant</td>\n",
       "      <td>-37.819897</td>\n",
       "      <td>144.966001</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Waterfront Seafood-Bar-Grill</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>-37.820029</td>\n",
       "      <td>144.965557</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Pure South</td>\n",
       "      <td>Australian Restaurant</td>\n",
       "      <td>-37.820232</td>\n",
       "      <td>144.965259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Broad Bean Organic Grocer</td>\n",
       "      <td>Grocery Store</td>\n",
       "      <td>-37.822588</td>\n",
       "      <td>144.966912</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                           name             categories        lat         lng\n",
       "0           Southbank Promenade       Pedestrian Plaza -37.819959  144.965467\n",
       "1               Ponyfish Island                    Bar -37.819918  144.965021\n",
       "2                   Yarra River                  River -37.819684  144.965115\n",
       "3             Eureka Skydeck 88         Scenic Lookout -37.821589  144.964594\n",
       "4                   The Langham                  Hotel -37.820370  144.965710\n",
       "5                Soho Melbourne     Italian Restaurant -37.820609  144.963152\n",
       "6         ENA greek street food       Greek Restaurant -37.819897  144.966001\n",
       "7  Waterfront Seafood-Bar-Grill     Seafood Restaurant -37.820029  144.965557\n",
       "8                    Pure South  Australian Restaurant -37.820232  144.965259\n",
       "9     Broad Bean Organic Grocer          Grocery Store -37.822588  144.966912"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "venues = results['response']['groups'][0]['items']\n",
    "    \n",
    "SBnearby_venues = json_normalize(venues) # flatten JSON\n",
    "\n",
    "# filter columns\n",
    "filtered_columns = ['venue.name', 'venue.categories', 'venue.location.lat', 'venue.location.lng']\n",
    "SBnearby_venues =SBnearby_venues.loc[:, filtered_columns]\n",
    "\n",
    "# filter the category for each row\n",
    "SBnearby_venues['venue.categories'] = SBnearby_venues.apply(get_category_type, axis=1)\n",
    "\n",
    "# clean columns\n",
    "SBnearby_venues.columns = [col.split(\".\")[-1] for col in SBnearby_venues.columns]\n",
    "\n",
    "SBnearby_venues.head(10)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Map of Southbank in Melbourne with venues near residence place - for reference"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQtZHZmLzAuMy4wL2xlYWZsZXQtZHZmLm1hcmtlcnMubWluLmpzIj48L3NjcmlwdD4KPC9oZWFkPgo8Ym9keT4gICAgCiAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9saXVtLW1hcCIgaWQ9Im1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYiIgPjwvZGl2PgogICAgICAgIAo8L2JvZHk+CjxzY3JpcHQ+ICAgIAogICAgCgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBudWxsOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHZhciBtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIgPSBMLm1hcCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NlbnRlcjogWy0zNy44MjEyODk4LDE0NC45NjQ0MTczXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IDIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Qm91bmRzOiBib3VuZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ybGRDb3B5SnVtcDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgdGlsZV9sYXllcl82MGI5MDJkNjZjNGY0YzU3OWMzY2QyMWE2ZDgwMWI1YyA9IEwudGlsZUxheWVyKAogICAgICAgICAgICAgICAgJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywKICAgICAgICAgICAgICAgIHsKICAiYXR0cmlidXRpb24iOiBudWxsLAogICJkZXRlY3RSZXRpbmEiOiBmYWxzZSwKICAibWF4Wm9vbSI6IDE4LAogICJtaW5ab29tIjogMSwKICAibm9XcmFwIjogZmFsc2UsCiAgInN1YmRvbWFpbnMiOiAiYWJjIgp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNDM5NTFjZjU4ZWE5NDFlNzkyNTcxMzIzOWE1MzFkZTEgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE5OTU4OTg4OTYxOTMsMTQ0Ljk2NTQ2NzAwMTM2ODEpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iMDdhM2U4YjQ0YmM0Y2FlYWFhZDVlNWJiZjA0ODhhNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kZGNhZDAzY2Q4NDA0MWJmYWY3ODc5NzI1ZjJmMDk3MCA9ICQoJzxkaXYgaWQ9Imh0bWxfZGRjYWQwM2NkODQwNDFiZmFmNzg3OTcyNWYyZjA5NzAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNvdXRoYmFuayBQcm9tZW5hZGU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2IwN2EzZThiNDRiYzRjYWVhYWFkNWU1YmJmMDQ4OGE2LnNldENvbnRlbnQoaHRtbF9kZGNhZDAzY2Q4NDA0MWJmYWY3ODc5NzI1ZjJmMDk3MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl80Mzk1MWNmNThlYTk0MWU3OTI1NzEzMjM5YTUzMWRlMS5iaW5kUG9wdXAocG9wdXBfYjA3YTNlOGI0NGJjNGNhZWFhYWQ1ZTViYmYwNDg4YTYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZGIyYTVjNGQ4Mzk1NDRkZGExZjYyZjk5ZWI2OWU4YjAgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE5OTE3NzI1MTk3OTQ2LDE0NC45NjUwMjExMjY1MTA0KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTY3YjFiZmU3ZDhlNDA1YmI2MzI3NDExNjFkMmFkMTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjNmY2M1MzQ5NWNmNDczM2FlYjA2YzAzODFhMzhkZGMgPSAkKCc8ZGl2IGlkPSJodG1sX2IzZmNjNTM0OTVjZjQ3MzNhZWIwNmMwMzgxYTM4ZGRjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Qb255ZmlzaCBJc2xhbmQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U2N2IxYmZlN2Q4ZTQwNWJiNjMyNzQxMTYxZDJhZDE3LnNldENvbnRlbnQoaHRtbF9iM2ZjYzUzNDk1Y2Y0NzMzYWViMDZjMDM4MWEzOGRkYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9kYjJhNWM0ZDgzOTU0NGRkYTFmNjJmOTllYjY5ZThiMC5iaW5kUG9wdXAocG9wdXBfZTY3YjFiZmU3ZDhlNDA1YmI2MzI3NDExNjFkMmFkMTcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYjZmZGQ5MjRmY2I1NGI5MmE3NDY3NzIyYWI1NTc0OWQgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE5NjgzNjMxNzAxMjEsMTQ0Ljk2NTExNDU5MzUwNTg2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjFhOWExOWI3MGNlNGZmMmFjOTFlNTg1ZjZjZTJkMDMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzY5NTRjMTNjNDk5NGNlZmE5OWJjMTE3MDkxZTYzY2YgPSAkKCc8ZGl2IGlkPSJodG1sXzc2OTU0YzEzYzQ5OTRjZWZhOTliYzExNzA5MWU2M2NmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5ZYXJyYSBSaXZlcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjFhOWExOWI3MGNlNGZmMmFjOTFlNTg1ZjZjZTJkMDMuc2V0Q29udGVudChodG1sXzc2OTU0YzEzYzQ5OTRjZWZhOTliYzExNzA5MWU2M2NmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2I2ZmRkOTI0ZmNiNTRiOTJhNzQ2NzcyMmFiNTU3NDlkLmJpbmRQb3B1cChwb3B1cF8yMWE5YTE5YjcwY2U0ZmYyYWM5MWU1ODVmNmNlMmQwMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jNjc0NDJlNzU3MTA0Y2RiYjY4Njc1ZWI5ZGNhNGJlOCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE1ODg3ODg5MzczNCwxNDQuOTY0NTk0NDIxNjE0NzIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jODhlODJhMmY4NGM0N2JhYjFmMGJiYWIzMjQ1NTM3YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xMzY5Y2JiNGY3YWI0OGM2OWQ5MDkyNDQyYTcxMzVkYiA9ICQoJzxkaXYgaWQ9Imh0bWxfMTM2OWNiYjRmN2FiNDhjNjlkOTA5MjQ0MmE3MTM1ZGIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkV1cmVrYSBTa3lkZWNrIDg4PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jODhlODJhMmY4NGM0N2JhYjFmMGJiYWIzMjQ1NTM3Yy5zZXRDb250ZW50KGh0bWxfMTM2OWNiYjRmN2FiNDhjNjlkOTA5MjQ0MmE3MTM1ZGIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzY3NDQyZTc1NzEwNGNkYmI2ODY3NWViOWRjYTRiZTguYmluZFBvcHVwKHBvcHVwX2M4OGU4MmEyZjg0YzQ3YmFiMWYwYmJhYjMyNDU1MzdjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2QzZjgwOWI0MjRjYTRkNjdiZTc1MWYwMThiZTNhYjRkID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMDM3LDE0NC45NjU3MSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc0NTk2NWE5ZTllNjRkZDc5MjZjYmY3YzE1NWQ4ODUzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIyNDE4MGJlZmNkMzQ2NTNiOWFkMmZlNzUxOTA0NmUzID0gJCgnPGRpdiBpZD0iaHRtbF8yMjQxODBiZWZjZDM0NjUzYjlhZDJmZTc1MTkwNDZlMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIExhbmdoYW08L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzc0NTk2NWE5ZTllNjRkZDc5MjZjYmY3YzE1NWQ4ODUzLnNldENvbnRlbnQoaHRtbF8yMjQxODBiZWZjZDM0NjUzYjlhZDJmZTc1MTkwNDZlMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9kM2Y4MDliNDI0Y2E0ZDY3YmU3NTFmMDE4YmUzYWI0ZC5iaW5kUG9wdXAocG9wdXBfNzQ1OTY1YTllOWU2NGRkNzkyNmNiZjdjMTU1ZDg4NTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZDBmNmE1ZmQ1YWIyNGY1ZTkzNDNhNzQyY2Q4YjQ5NTEgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIwNjA4NTcxNTE2MjYsMTQ0Ljk2MzE1MjIyNDc5ODA1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjY5YjlkN2UwMTYyNGJlYjliMjZjZDg4MDU5NDgyM2IgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNGQ1YWNhNzdhMGE3NGRlY2FhNzNiODVlZTgzZTJhYTMgPSAkKCc8ZGl2IGlkPSJodG1sXzRkNWFjYTc3YTBhNzRkZWNhYTczYjg1ZWU4M2UyYWEzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Tb2hvIE1lbGJvdXJuZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjY5YjlkN2UwMTYyNGJlYjliMjZjZDg4MDU5NDgyM2Iuc2V0Q29udGVudChodG1sXzRkNWFjYTc3YTBhNzRkZWNhYTczYjg1ZWU4M2UyYWEzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2QwZjZhNWZkNWFiMjRmNWU5MzQzYTc0MmNkOGI0OTUxLmJpbmRQb3B1cChwb3B1cF9mNjliOWQ3ZTAxNjI0YmViOWIyNmNkODgwNTk0ODIzYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9iOTU3ZDkxYWRkY2Q0NjM0OWU4MTM0YzVhMjJkNmZiNiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTk4OTY1NDg4NzUyNSwxNDQuOTY2MDAxMDg3OTQ1NDEpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zOWJhMzEyMWY2OGQ0ZWNkYjYwMDFiMTg4M2YyYTQ3ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84M2JlZTRhNThjMTk0YWQyYjE3MDQ0ZTU0MGVlMTZmOSA9ICQoJzxkaXYgaWQ9Imh0bWxfODNiZWU0YTU4YzE5NGFkMmIxNzA0NGU1NDBlZTE2ZjkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkVOQSBncmVlayBzdHJlZXQgZm9vZDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzliYTMxMjFmNjhkNGVjZGI2MDAxYjE4ODNmMmE0N2Yuc2V0Q29udGVudChodG1sXzgzYmVlNGE1OGMxOTRhZDJiMTcwNDRlNTQwZWUxNmY5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2I5NTdkOTFhZGRjZDQ2MzQ5ZTgxMzRjNWEyMmQ2ZmI2LmJpbmRQb3B1cChwb3B1cF8zOWJhMzEyMWY2OGQ0ZWNkYjYwMDFiMTg4M2YyYTQ3Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lMjIxNGNiMTYxMWM0NWU2YjVkZjY1MWJjZDUxYzVjZSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjAwMjkyMTQ5MTc2NCwxNDQuOTY1NTU3MTIzMTgyNzIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84Mzg2NjE2NWNlMDU0NDBlODI3NWZhNjdlYjM4ZmIxNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zODFmMzQ0YzQ1ZTE0NTk4YjA0YjYxOTU5NTU5NTliNyA9ICQoJzxkaXYgaWQ9Imh0bWxfMzgxZjM0NGM0NWUxNDU5OGIwNGI2MTk1OTU1OTU5YjciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldhdGVyZnJvbnQgU2VhZm9vZC1CYXItR3JpbGw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzgzODY2MTY1Y2UwNTQ0MGU4Mjc1ZmE2N2ViMzhmYjE1LnNldENvbnRlbnQoaHRtbF8zODFmMzQ0YzQ1ZTE0NTk4YjA0YjYxOTU5NTU5NTliNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lMjIxNGNiMTYxMWM0NWU2YjVkZjY1MWJjZDUxYzVjZS5iaW5kUG9wdXAocG9wdXBfODM4NjYxNjVjZTA1NDQwZTgyNzVmYTY3ZWIzOGZiMTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzYyNTA4YjA2N2E2NDU0NzhiNmRkOWUyZWZkMjQ4MTIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIwMjMyLDE0NC45NjUyNTkpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iOTI5ZDQ2YzZjZjQ0OWZlOGRkNzE5OTViY2Q3ZDkxOCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mODgyNjczN2RmMjE0NDkxOGU1YzEzNTEyZWQ5OWVlMCA9ICQoJzxkaXYgaWQ9Imh0bWxfZjg4MjY3MzdkZjIxNDQ5MThlNWMxMzUxMmVkOTllZTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlB1cmUgU291dGg8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I5MjlkNDZjNmNmNDQ5ZmU4ZGQ3MTk5NWJjZDdkOTE4LnNldENvbnRlbnQoaHRtbF9mODgyNjczN2RmMjE0NDkxOGU1YzEzNTEyZWQ5OWVlMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jNjI1MDhiMDY3YTY0NTQ3OGI2ZGQ5ZTJlZmQyNDgxMi5iaW5kUG9wdXAocG9wdXBfYjkyOWQ0NmM2Y2Y0NDlmZThkZDcxOTk1YmNkN2Q5MTgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNzkwZGNjM2M1ZmUzNDY5M2E4OTlhNmNmNzI3YmY1NzEgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIyNTg4MTMzNDg5Mjc2LDE0NC45NjY5MTI0MjYwNTk5MyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY2M2ZiZTY1NGQ5ZTQ0NzVhMGE1MjExNzBhOGZlMjIzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RjMTY5NTYyOTQ1YzRlNzhiYTI3Y2Y3N2U2NGQwMDJhID0gJCgnPGRpdiBpZD0iaHRtbF9kYzE2OTU2Mjk0NWM0ZTc4YmEyN2NmNzdlNjRkMDAyYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJvYWQgQmVhbiBPcmdhbmljIEdyb2NlcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjYzZmJlNjU0ZDllNDQ3NWEwYTUyMTE3MGE4ZmUyMjMuc2V0Q29udGVudChodG1sX2RjMTY5NTYyOTQ1YzRlNzhiYTI3Y2Y3N2U2NGQwMDJhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzc5MGRjYzNjNWZlMzQ2OTNhODk5YTZjZjcyN2JmNTcxLmJpbmRQb3B1cChwb3B1cF82NjNmYmU2NTRkOWU0NDc1YTBhNTIxMTcwYThmZTIyMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yNDk5ZGJhYjA5YjA0MDQyODI5NGUxOGM3YzQ0YzI1NiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTkwMTk4MzI1NzkyNywxNDQuOTY2MDAzNzU0Nzc4NzQpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYzhiZTBmMDAwYzg0OTc3YTc1ODYxOTNjMzUwMzRjOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mYmIyMGEzNGY3ZDg0MTVlODMxODk4NTdhY2NhYjYxYiA9ICQoJzxkaXYgaWQ9Imh0bWxfZmJiMjBhMzRmN2Q4NDE1ZTgzMTg5ODU3YWNjYWI2MWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFyYm9yeSBCYXIgJmFtcDsgRWF0ZXJ5PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mYzhiZTBmMDAwYzg0OTc3YTc1ODYxOTNjMzUwMzRjOS5zZXRDb250ZW50KGh0bWxfZmJiMjBhMzRmN2Q4NDE1ZTgzMTg5ODU3YWNjYWI2MWIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjQ5OWRiYWIwOWIwNDA0MjgyOTRlMThjN2M0NGMyNTYuYmluZFBvcHVwKHBvcHVwX2ZjOGJlMGYwMDBjODQ5NzdhNzU4NjE5M2MzNTAzNGM5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2ExMTczNWNlZmY4ZDQ1ZWI5Y2ZmZWZhY2MzMzcxMDM5ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMDcwMTQwMTQ0MDQzLDE0NC45NjM0ODAwMDAwMTc4NSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA2OWNhZDJhMTZiMTQ0YTA4NzMzN2Y3MGJkMDcwYmEzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFkYmZlNDExMGQ4MDQ4NDFhMWVhYTRkOTZmZDY3NmMyID0gJCgnPGRpdiBpZD0iaHRtbF8xZGJmZTQxMTBkODA0ODQxYTFlYWE0ZDk2ZmQ2NzZjMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SG9wc2NvdGNoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wNjljYWQyYTE2YjE0NGEwODczMzdmNzBiZDA3MGJhMy5zZXRDb250ZW50KGh0bWxfMWRiZmU0MTEwZDgwNDg0MWExZWFhNGQ5NmZkNjc2YzIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYTExNzM1Y2VmZjhkNDVlYjljZmZlZmFjYzMzNzEwMzkuYmluZFBvcHVwKHBvcHVwXzA2OWNhZDJhMTZiMTQ0YTA4NzMzN2Y3MGJkMDcwYmEzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzRiNzQ4MmI1OWEzNjQxOTRhZmNhNjhlMTBiODExMmU5ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMTYyNDUwMDQ1NDk2LDE0NC45NjM4OTUyNDY0MTk1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzUxMTJmNWM3Yzk2NDBjMmE4NTJlN2ZhYTMxYTgxNTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTlhMTJlNGU0OWEyNDY5N2E5ZTE5N2EyZTlmOTA1NzAgPSAkKCc8ZGl2IGlkPSJodG1sXzU5YTEyZTRlNDlhMjQ2OTdhOWUxOTdhMmU5ZjkwNTcwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgQm9uZCBTdG9yZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzUxMTJmNWM3Yzk2NDBjMmE4NTJlN2ZhYTMxYTgxNTAuc2V0Q29udGVudChodG1sXzU5YTEyZTRlNDlhMjQ2OTdhOWUxOTdhMmU5ZjkwNTcwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzRiNzQ4MmI1OWEzNjQxOTRhZmNhNjhlMTBiODExMmU5LmJpbmRQb3B1cChwb3B1cF83NTExMmY1YzdjOTY0MGMyYTg1MmU3ZmFhMzFhODE1MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lYTU2YmU5MThmZDA0MzYyOWExNWE0NmYwY2IyMmQ4OCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTg2MTM3NDQ5NzY1LDE0NC45NjI2MDQwNzE2Mzg3NCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc3NTlhMDc3NDlmYTQzMGY4MjBjMjJmMjAzNjM4MjJlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNjZWQzZTUzYjU3MjQ3NjhiZWQ5ZTBhNzQwYmNlMjg3ID0gJCgnPGRpdiBpZD0iaHRtbF8zY2VkM2U1M2I1NzI0NzY4YmVkOWUwYTc0MGJjZTI4NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FuZGVsYSBOdWV2bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzc1OWEwNzc0OWZhNDMwZjgyMGMyMmYyMDM2MzgyMmUuc2V0Q29udGVudChodG1sXzNjZWQzZTUzYjU3MjQ3NjhiZWQ5ZTBhNzQwYmNlMjg3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2VhNTZiZTkxOGZkMDQzNjI5YTE1YTQ2ZjBjYjIyZDg4LmJpbmRQb3B1cChwb3B1cF83NzU5YTA3NzQ5ZmE0MzBmODIwYzIyZjIwMzYzODIyZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8wMzY2YzZlYjQ5MTI0ZTgzODRiZTk5Y2UzMTVlYWUxOCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE0ODQsMTQ0Ljk2NDIyNSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E4MTc3ODFhMjk0NzQ3ODc5ZGYzMzYwNjk4ZTIwNDMxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FmNmE3OWMzODdiYTRhNTI5OGI3MTFkODc0NTI1ZTE5ID0gJCgnPGRpdiBpZD0iaHRtbF9hZjZhNzljMzg3YmE0YTUyOThiNzExZDg3NDUyNWUxOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmVsZ2lhbiBCZWVyIENhZmUgTWVsYm91cm5lPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hODE3NzgxYTI5NDc0Nzg3OWRmMzM2MDY5OGUyMDQzMS5zZXRDb250ZW50KGh0bWxfYWY2YTc5YzM4N2JhNGE1Mjk4YjcxMWQ4NzQ1MjVlMTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMDM2NmM2ZWI0OTEyNGU4Mzg0YmU5OWNlMzE1ZWFlMTguYmluZFBvcHVwKHBvcHVwX2E4MTc3ODFhMjk0NzQ3ODc5ZGYzMzYwNjk4ZTIwNDMxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzY0ZDUzOTQ4MjMyYzRlZmZhNDU4ZDIyNzkxNWI3MmRmID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxOTQyOTczODc0NDM5LDE0NC45NjYzMzgyMzQwODMzNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2YwYTQ5YWVmZWQzMzRkMzRhZTZhNDUwYzE4NWRiYTVmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY4OTUxZGFhZDljZjRjYjRiZGZjZDAxZDM0ODMwOTc3ID0gJCgnPGRpdiBpZD0iaHRtbF82ODk1MWRhYWQ5Y2Y0Y2I0YmRmY2QwMWQzNDgzMDk3NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QXJib3J5IEFmbG9hdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjBhNDlhZWZlZDMzNGQzNGFlNmE0NTBjMTg1ZGJhNWYuc2V0Q29udGVudChodG1sXzY4OTUxZGFhZDljZjRjYjRiZGZjZDAxZDM0ODMwOTc3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzY0ZDUzOTQ4MjMyYzRlZmZhNDU4ZDIyNzkxNWI3MmRmLmJpbmRQb3B1cChwb3B1cF9mMGE0OWFlZmVkMzM0ZDM0YWU2YTQ1MGMxODVkYmE1Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8zY2M0MDQyMjllMzA0NWQwYjBkMGRhOGY0M2U1M2FmMiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE2Njg5MTY4NTgzNywxNDQuOTYwMzUzNjcyNTA0NDMpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80ZDljNjNjYzI3NTI0MzBiOTI4NWJiYjRhMmI5YjFmNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOGIwNmZiNzE1ODI0NTkyYmFkMzdmY2JlMjUxNTc5OSA9ICQoJzxkaXYgaWQ9Imh0bWxfMjhiMDZmYjcxNTgyNDU5MmJhZDM3ZmNiZTI1MTU3OTkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNyb3duIFByb21lbmFkZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNGQ5YzYzY2MyNzUyNDMwYjkyODViYmI0YTJiOWIxZjcuc2V0Q29udGVudChodG1sXzI4YjA2ZmI3MTU4MjQ1OTJiYWQzN2ZjYmUyNTE1Nzk5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzNjYzQwNDIyOWUzMDQ1ZDBiMGQwZGE4ZjQzZTUzYWYyLmJpbmRQb3B1cChwb3B1cF80ZDljNjNjYzI3NTI0MzBiOTI4NWJiYjRhMmI5YjFmNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl81MDZmNWZhNmRjNzc0MjM2ODhjY2UwOGJmNTYxY2E2NyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjM2ODUxMTEwOTI1OTQsMTQ0Ljk2NzU5OTA1NzY1OTA3KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTUzYTVhNjJlOTA1NDlhOTgzMjZiZjAzYzc2OGFjMTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjBiNjMyZTI1NGM1NDY2NWI0NzY4MjMzY2QzNGM3NTEgPSAkKCc8ZGl2IGlkPSJodG1sXzIwYjYzMmUyNTRjNTQ2NjViNDc2ODIzM2NkMzRjNzUxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NZWxib3VybmUgUmVjaXRhbCBDZW50cmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U1M2E1YTYyZTkwNTQ5YTk4MzI2YmYwM2M3NjhhYzE1LnNldENvbnRlbnQoaHRtbF8yMGI2MzJlMjU0YzU0NjY1YjQ3NjgyMzNjZDM0Yzc1MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl81MDZmNWZhNmRjNzc0MjM2ODhjY2UwOGJmNTYxY2E2Ny5iaW5kUG9wdXAocG9wdXBfZTUzYTVhNjJlOTA1NDlhOTgzMjZiZjAzYzc2OGFjMTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYTQwYjVkODdlNmE1NDY3NmJlZmZlMWZhMDAzYzNkMDIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIxMzA4OTg2NzYxMjIsMTQ0Ljk2NzU4OTM3MDQ3NDMpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wMDQyNDBjOWM3Njk0NGQxOGIxYmU4ZmUzMDgzNzQzMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MzU4MzY1YTI1ZDQ0MjIxYWYyMTc0ZTdkMzU0NzBjZSA9ICQoJzxkaXYgaWQ9Imh0bWxfNDM1ODM2NWEyNWQ0NDIyMWFmMjE3NGU3ZDM1NDcwY2UiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRlc3RpbmcgR3JvdW5kczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDA0MjQwYzljNzY5NDRkMThiMWJlOGZlMzA4Mzc0MzAuc2V0Q29udGVudChodG1sXzQzNTgzNjVhMjVkNDQyMjFhZjIxNzRlN2QzNTQ3MGNlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2E0MGI1ZDg3ZTZhNTQ2NzZiZWZmZTFmYTAwM2MzZDAyLmJpbmRQb3B1cChwb3B1cF8wMDQyNDBjOWM3Njk0NGQxOGIxYmU4ZmUzMDgzNzQzMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lMGQ3NmQ2YjFhODk0YzU5YmRlOGI1ODZkOTllYzZjNiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjI1NTUyLDE0NC45NjA1NDUzKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTI0Y2QwMmQ3ZGM0NDY0N2E1ZTYzYTA5ZGJhOWQ4NGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzE3MWZkMjUxN2FkNDRiZDllNTdiN2RhMTMyMDc5YjIgPSAkKCc8ZGl2IGlkPSJodG1sXzcxNzFmZDI1MTdhZDQ0YmQ5ZTU3YjdkYTEzMjA3OWIyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Mb3VpcyBWdWl0dG9uPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85MjRjZDAyZDdkYzQ0NjQ3YTVlNjNhMDlkYmE5ZDg0ZC5zZXRDb250ZW50KGh0bWxfNzE3MWZkMjUxN2FkNDRiZDllNTdiN2RhMTMyMDc5YjIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZTBkNzZkNmIxYTg5NGM1OWJkZThiNTg2ZDk5ZWM2YzYuYmluZFBvcHVwKHBvcHVwXzkyNGNkMDJkN2RjNDQ2NDdhNWU2M2EwOWRiYTlkODRkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2MzMjg5MzFkNjM3YTQ5MTRhYjk0NjY1MjliZWFhMDk0ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMTYyNjA4MDIwMTUyLDE0NC45Njg4OTQwNTk4MDg1MiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg0ZjlkOWUzYzg3NjRiZGViMzVhNDQyYTc0NjZkYWI3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2VlNmQzODhkMDM4ZjQxOTY4YjhjZWU3ODEyYTNiNjQxID0gJCgnPGRpdiBpZD0iaHRtbF9lZTZkMzg4ZDAzOGY0MTk2OGI4Y2VlNzgxMmEzYjY0MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3RhdGUgVGhlYXRyZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODRmOWQ5ZTNjODc2NGJkZWIzNWE0NDJhNzQ2NmRhYjcuc2V0Q29udGVudChodG1sX2VlNmQzODhkMDM4ZjQxOTY4YjhjZWU3ODEyYTNiNjQxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2MzMjg5MzFkNjM3YTQ5MTRhYjk0NjY1MjliZWFhMDk0LmJpbmRQb3B1cChwb3B1cF84NGY5ZDllM2M4NzY0YmRlYjM1YTQ0MmE3NDY2ZGFiNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8zNGY3MWY5MDVmYWI0OWEzYjk1N2YzZGVmNTRiMTE1ZiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE2MiwxNDQuOTY4ODA4KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTE1OGZkMzY5NWQ2NGFjNWJkMjZkOGFkMmIyMjM0N2EgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWY2NmQ2NjYzMTU3NDZiNmIwZjIxNDk3MzlkNjkwM2UgPSAkKCc8ZGl2IGlkPSJodG1sXzFmNjZkNjY2MzE1NzQ2YjZiMGYyMTQ5NzM5ZDY5MDNlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BcnRzIENlbnRyZSBNZWxib3VybmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzUxNThmZDM2OTVkNjRhYzViZDI2ZDhhZDJiMjIzNDdhLnNldENvbnRlbnQoaHRtbF8xZjY2ZDY2NjMxNTc0NmI2YjBmMjE0OTczOWQ2OTAzZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8zNGY3MWY5MDVmYWI0OWEzYjk1N2YzZGVmNTRiMTE1Zi5iaW5kUG9wdXAocG9wdXBfNTE1OGZkMzY5NWQ2NGFjNWJkMjZkOGFkMmIyMjM0N2EpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOGEwZDgyNWM0ZjgyNGZjYjk3ZmUzZjg3NGRlYzM2MGUgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIyMDQyLDE0NC45NjAxMjcpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wYTNhODdkZDI0YzQ0M2VjYWQ4MTJmYzVmMjNjMTgzNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNDhlYmIxY2I5NjA0ZTMyODU3ZjU3ZWIyNmMwNmE2NiA9ICQoJzxkaXYgaWQ9Imh0bWxfYzQ4ZWJiMWNiOTYwNGUzMjg1N2Y1N2ViMjZjMDZhNjYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvY2twb29sIEJhciAmYW1wOyBHcmlsbDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGEzYTg3ZGQyNGM0NDNlY2FkODEyZmM1ZjIzYzE4Mzcuc2V0Q29udGVudChodG1sX2M0OGViYjFjYjk2MDRlMzI4NTdmNTdlYjI2YzA2YTY2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzhhMGQ4MjVjNGY4MjRmY2I5N2ZlM2Y4NzRkZWMzNjBlLmJpbmRQb3B1cChwb3B1cF8wYTNhODdkZDI0YzQ0M2VjYWQ4MTJmYzVmMjNjMTgzNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9hN2M0MjU0MzI5NTA0MjlkOWUyZWNiNDhkZTU2MzcyYSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTc3MTUzNDAyOTA4MywxNDQuOTY1OTk2ODg2ODMxNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZhOGY5NTU5NzQwNTQ1MTg4Y2E3MzM4ODcyMDM3ZGQwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzVlMzgwYzNmODA3OTRlODhhZDQxMmE3NTlhNjllZWYyID0gJCgnPGRpdiBpZD0iaHRtbF81ZTM4MGMzZjgwNzk0ZTg4YWQ0MTJhNzU5YTY5ZWVmMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGlkYXBpcMOzIEdlbGF0ZXJpYTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmE4Zjk1NTk3NDA1NDUxODhjYTczMzg4NzIwMzdkZDAuc2V0Q29udGVudChodG1sXzVlMzgwYzNmODA3OTRlODhhZDQxMmE3NTlhNjllZWYyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2E3YzQyNTQzMjk1MDQyOWQ5ZTJlY2I0OGRlNTYzNzJhLmJpbmRQb3B1cChwb3B1cF82YThmOTU1OTc0MDU0NTE4OGNhNzMzODg3MjAzN2RkMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jMWFkNjM2YjQwYzI0MmQyYTcyOTdjMWYxMDBmNmM0MCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjAyNTMwMTczMzk2MywxNDQuOTY4NDc5OTczNTgyNCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MxMjVkY2UwNjdjZjRlNzliYTgyZGRlZGE0ZmRhNTdjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzk2YjQ0NDRmNWVkMjQ4Y2ZiMmE2OWI0MjVjNWNmMzFiID0gJCgnPGRpdiBpZD0iaHRtbF85NmI0NDQ0ZjVlZDI0OGNmYjJhNjliNDI1YzVjZjMxYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFtZXIgSGFsbDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzEyNWRjZTA2N2NmNGU3OWJhODJkZGVkYTRmZGE1N2Muc2V0Q29udGVudChodG1sXzk2YjQ0NDRmNWVkMjQ4Y2ZiMmE2OWI0MjVjNWNmMzFiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2MxYWQ2MzZiNDBjMjQyZDJhNzI5N2MxZjEwMGY2YzQwLmJpbmRQb3B1cChwb3B1cF9jMTI1ZGNlMDY3Y2Y0ZTc5YmE4MmRkZWRhNGZkYTU3Yyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lMzAyMWVmMGI5MjI0NmE1OWExZDJlYzc3ODkyMzhlOCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjEyOTc2MDcwNDI5OCwxNDQuOTYxNjcyNTc4ODg1MzgpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mY2ExOWQ0ZTBmZjY0MjA4YjJmYjkzMmI2Mjc2NjczOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82Yzg4MDQ4MTJmMTM0ZGM3YTA2Y2UyMGE5OTMyMDkwNCA9ICQoJzxkaXYgaWQ9Imh0bWxfNmM4ODA0ODEyZjEzNGRjN2EwNmNlMjBhOTkzMjA5MDQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBNZWF0ICZhbXA7IFdpbmUgQ288L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZjYTE5ZDRlMGZmNjQyMDhiMmZiOTMyYjYyNzY2NzM5LnNldENvbnRlbnQoaHRtbF82Yzg4MDQ4MTJmMTM0ZGM3YTA2Y2UyMGE5OTMyMDkwNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lMzAyMWVmMGI5MjI0NmE1OWExZDJlYzc3ODkyMzhlOC5iaW5kUG9wdXAocG9wdXBfZmNhMTlkNGUwZmY2NDIwOGIyZmI5MzJiNjI3NjY3MzkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjI2NmI5ZDY2OWNlNGZmMWIxNjNkNjBhZWZjODczMmIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE5NzQzODkzMjU1NjUsMTQ0Ljk2NjU3NzQzODgyNTgyKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWEzZmQ3ZWUzZjUwNDEzZDg5OTliODlhM2JkZTdhMzUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWE3OTA5NWE5NzllNDYwNmJhYWQ0OTJlMGUwNTkwYWYgPSAkKCc8ZGl2IGlkPSJodG1sX2FhNzkwOTVhOTc5ZTQ2MDZiYWFkNDkyZTBlMDU5MGFmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmlsbCYjMzk7ZDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOWEzZmQ3ZWUzZjUwNDEzZDg5OTliODlhM2JkZTdhMzUuc2V0Q29udGVudChodG1sX2FhNzkwOTVhOTc5ZTQ2MDZiYWFkNDkyZTBlMDU5MGFmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzIyNjZiOWQ2NjljZTRmZjFiMTYzZDYwYWVmYzg3MzJiLmJpbmRQb3B1cChwb3B1cF85YTNmZDdlZTNmNTA0MTNkODk5OWI4OWEzYmRlN2EzNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85ODMzNjQ1NmViYzc0N2U3ODM4NmJkYTdiNTQzYzE2OCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjI0ODMwMjU0MzE3MTUsMTQ0Ljk2OTMwMzcxOTQ5MjIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82MjhhZDg3M2E4ZjE0NjI0OTM5NWVhOTRlMjZjYTMyNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83Y2FmOWIzODE5NTU0YTUxOGM5ZDA3MzcxYzMxMzBlYiA9ICQoJzxkaXYgaWQ9Imh0bWxfN2NhZjliMzgxOTU1NGE1MThjOWQwNzM3MWMzMTMwZWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk5hdGlvbmFsIEdhbGxlcnkgb2YgVmljdG9yaWE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzYyOGFkODczYThmMTQ2MjQ5Mzk1ZWE5NGUyNmNhMzI1LnNldENvbnRlbnQoaHRtbF83Y2FmOWIzODE5NTU0YTUxOGM5ZDA3MzcxYzMxMzBlYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85ODMzNjQ1NmViYzc0N2U3ODM4NmJkYTdiNTQzYzE2OC5iaW5kUG9wdXAocG9wdXBfNjI4YWQ4NzNhOGYxNDYyNDkzOTVlYTk0ZTI2Y2EzMjUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzljZTQyY2Y0ODg3NDAyOTk2ZjBhNTc3YmU2M2U4ZjEgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE5NzA4NzQwNjY3NjksMTQ0Ljk2Nzc4NDg2MzY4NTUpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82NWVjYmQ3NGMwNmY0NWNhYmJiMjU4MjRiODI3NGFhNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOWUyYzVmZmM2N2M0NzMzOTM5NWFmMGRlNzAzNTQzZCA9ICQoJzxkaXYgaWQ9Imh0bWxfMjllMmM1ZmZjNjdjNDczMzkzOTVhZjBkZTcwMzU0M2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZhdHRvIEJhciAmYW1wOyBDYW50aW5hPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82NWVjYmQ3NGMwNmY0NWNhYmJiMjU4MjRiODI3NGFhNS5zZXRDb250ZW50KGh0bWxfMjllMmM1ZmZjNjdjNDczMzkzOTVhZjBkZTcwMzU0M2QpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzljZTQyY2Y0ODg3NDAyOTk2ZjBhNTc3YmU2M2U4ZjEuYmluZFBvcHVwKHBvcHVwXzY1ZWNiZDc0YzA2ZjQ1Y2FiYmIyNTgyNGI4Mjc0YWE1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzViNWMzZDQ4NGFlMzRhYmRiNTg3YmEyMDA4YWQ3MjFkID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMzkxOTE0ODgxMjI1LDE0NC45NjgyNzYxNDA1OTAxOCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM4OTJiMTZjNjFiZDQxMDJhOWE4MTYwYmMxZDNjMzU0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU0OGRiNTFkYmVhODQwZWI4ZDQwYzNhNDhkY2JmZmZkID0gJCgnPGRpdiBpZD0iaHRtbF81NDhkYjUxZGJlYTg0MGViOGQ0MGMzYTQ4ZGNiZmZmZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U291dGhiYW5rIFRoZWF0cmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4OTJiMTZjNjFiZDQxMDJhOWE4MTYwYmMxZDNjMzU0LnNldENvbnRlbnQoaHRtbF81NDhkYjUxZGJlYTg0MGViOGQ0MGMzYTQ4ZGNiZmZmZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl81YjVjM2Q0ODRhZTM0YWJkYjU4N2JhMjAwOGFkNzIxZC5iaW5kUG9wdXAocG9wdXBfMzg5MmIxNmM2MWJkNDEwMmE5YTgxNjBiYzFkM2MzNTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNjFlZmQ4YWY2NTYyNGM3Yzk1NjhiMTFhNWVkMTAxNWQgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NzA2ODUyMjg5MDM1LDE0NC45NjMwNjgzOTQ1NTU4MiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2E0NmIzZjNlN2U5YTRlY2ZhNTc5OTQ4ZGJiMjZhZmEwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzk0MWViOTE1ODU0MjQ1NjhiZTkwM2I0YmNkYTMwOTQ5ID0gJCgnPGRpdiBpZD0iaHRtbF85NDFlYjkxNTg1NDI0NTY4YmU5MDNiNGJjZGEzMDk0OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmFydHJvbmljYTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTQ2YjNmM2U3ZTlhNGVjZmE1Nzk5NDhkYmIyNmFmYTAuc2V0Q29udGVudChodG1sXzk0MWViOTE1ODU0MjQ1NjhiZTkwM2I0YmNkYTMwOTQ5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzYxZWZkOGFmNjU2MjRjN2M5NTY4YjExYTVlZDEwMTVkLmJpbmRQb3B1cChwb3B1cF9hNDZiM2YzZTdlOWE0ZWNmYTU3OTk0OGRiYjI2YWZhMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9hNmM3ZTNkYjFiOTQ0YmE2OTA2M2I1NDdjMDRiOWJkZSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTc5NDQsMTQ0Ljk2NTI2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzVhZjQ2YTViYWVmNDcyYjg5OTE0ZWM1YWQ4NmUxOTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTVjYzQ1ZTY2MWNkNDdjZWE5NzI3OTEyNjgxNTQzZDQgPSAkKCc8ZGl2IGlkPSJodG1sXzU1Y2M0NWU2NjFjZDQ3Y2VhOTcyNzkxMjY4MTU0M2Q0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaXRuZXNzIEZpcnN0IFBsYXRpbnVtPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jNWFmNDZhNWJhZWY0NzJiODk5MTRlYzVhZDg2ZTE5NS5zZXRDb250ZW50KGh0bWxfNTVjYzQ1ZTY2MWNkNDdjZWE5NzI3OTEyNjgxNTQzZDQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYTZjN2UzZGIxYjk0NGJhNjkwNjNiNTQ3YzA0YjliZGUuYmluZFBvcHVwKHBvcHVwX2M1YWY0NmE1YmFlZjQ3MmI4OTkxNGVjNWFkODZlMTk1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzlhYTgyYWE3YjkzODRiMjliMTU0ODFjZjc5ODg2Y2M2ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMjM1NDU5NDQ2ODc1NiwxNDQuOTYyOTg2NDkyMzQ5MjQpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81OWI2M2RlYjk4Yzg0ZmU2YmNjMTc0MTI0ZjgwMDFiYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wYjk2Zjk3Nzk2NDE0Yjc0OTM2YjRiZTQ0MDMwMzZhMCA9ICQoJzxkaXYgaWQ9Imh0bWxfMGI5NmY5Nzc5NjQxNGI3NDkzNmI0YmU0NDAzMDM2YTAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJvY2NhdGEgSXRhbGlhbiBEZWxpPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81OWI2M2RlYjk4Yzg0ZmU2YmNjMTc0MTI0ZjgwMDFiYy5zZXRDb250ZW50KGh0bWxfMGI5NmY5Nzc5NjQxNGI3NDkzNmI0YmU0NDAzMDM2YTApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOWFhODJhYTdiOTM4NGIyOWIxNTQ4MWNmNzk4ODZjYzYuYmluZFBvcHVwKHBvcHVwXzU5YjYzZGViOThjODRmZTZiY2MxNzQxMjRmODAwMWJjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzE1ZTJiZDhhOTMyNTRiMDdhNzkzZTI4NzdiOTEwMmE2ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMTg4NDU0NDI2ODc5LDE0NC45NTk3MzM2MjUxMTE0NSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdlZjY4MGFhMWZiNjRmMGU5MDhkZTE1ZDNjNWZmNTIyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UzNDIzODZhMmQ1YjQ1ZjFhZDY4MWNkMjczNDA2NjgwID0gJCgnPGRpdiBpZD0iaHRtbF9lMzQyMzg2YTJkNWI0NWYxYWQ2ODFjZDI3MzQwNjY4MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3BpY2UgVGVtcGxlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ZWY2ODBhYTFmYjY0ZjBlOTA4ZGUxNWQzYzVmZjUyMi5zZXRDb250ZW50KGh0bWxfZTM0MjM4NmEyZDViNDVmMWFkNjgxY2QyNzM0MDY2ODApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMTVlMmJkOGE5MzI1NGIwN2E3OTNlMjg3N2I5MTAyYTYuYmluZFBvcHVwKHBvcHVwXzdlZjY4MGFhMWZiNjRmMGU5MDhkZTE1ZDNjNWZmNTIyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzdkYmJkMjIyOGRmNDRkZTJhYTBjYmY3ODZiN2QxMzQ1ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxOTk0NTk2MjA2MDQ0NCwxNDQuOTY5NDM0NjI0OTI4MDMpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zMjU5YmQyMmFiOGY0NDhkOGUyOGJkYmI3YzNlZmNhYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hOGYyM2EwMmM1ODU0NGExODdlZTIxODgyNzlmMGY5MiA9ICQoJzxkaXYgaWQ9Imh0bWxfYThmMjNhMDJjNTg1NDRhMTg3ZWUyMTg4Mjc5ZjBmOTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZveHRlbCBGZXN0aXZhbCBIdWI8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMyNTliZDIyYWI4ZjQ0OGQ4ZTI4YmRiYjdjM2VmY2FjLnNldENvbnRlbnQoaHRtbF9hOGYyM2EwMmM1ODU0NGExODdlZTIxODgyNzlmMGY5Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl83ZGJiZDIyMjhkZjQ0ZGUyYWEwY2JmNzg2YjdkMTM0NS5iaW5kUG9wdXAocG9wdXBfMzI1OWJkMjJhYjhmNDQ4ZDhlMjhiZGJiN2MzZWZjYWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYTE0YzBmMDI3MTc1NGE5MDhmOWNiMmU4MDRmYTM0ZmIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIxNTkxMzM2Nzc0MzI1LDE0NC45Njg4MjUwOTA0MTU1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNWM0N2U5OGVmMzFkNDZhYTk2OTlmOGU1ODI5YjRmMDEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2NkNDM4MjMxYjdkNDUwZTlhOTExYzQyZDIwZjcyZDcgPSAkKCc8ZGl2IGlkPSJodG1sX2NjZDQzODIzMWI3ZDQ1MGU5YTkxMWM0MmQyMGY3MmQ3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GYWlyZmF4IFN0dWRpbzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNWM0N2U5OGVmMzFkNDZhYTk2OTlmOGU1ODI5YjRmMDEuc2V0Q29udGVudChodG1sX2NjZDQzODIzMWI3ZDQ1MGU5YTkxMWM0MmQyMGY3MmQ3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2ExNGMwZjAyNzE3NTRhOTA4ZjljYjJlODA0ZmEzNGZiLmJpbmRQb3B1cChwb3B1cF81YzQ3ZTk4ZWYzMWQ0NmFhOTY5OWY4ZTU4MjliNGYwMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl83MzI2ZTk5ZGE0MjI0OWY5YTlhNDJlMTVlMDczNGI5MCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTgyMjA2NjczMDAxNCwxNDQuOTYyMTgxODg0MTQ3NTUpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84MjYwZWFhMzAxYTc0MzhlYTNhNDZiOWVhYjgwMzZiZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80Mzg3MjYwNTcxYjM0NTQ0YjQ2NmQ2ZGRlMTRlMGE5MiA9ICQoJzxkaXYgaWQ9Imh0bWxfNDM4NzI2MDU3MWIzNDU0NGI0NjZkNmRkZTE0ZTBhOTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1haGEgUmVzdGF1cmFudDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODI2MGVhYTMwMWE3NDM4ZWEzYTQ2YjllYWI4MDM2YmYuc2V0Q29udGVudChodG1sXzQzODcyNjA1NzFiMzQ1NDRiNDY2ZDZkZGUxNGUwYTkyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzczMjZlOTlkYTQyMjQ5ZjlhOWE0MmUxNWUwNzM0YjkwLmJpbmRQb3B1cChwb3B1cF84MjYwZWFhMzAxYTc0MzhlYTNhNDZiOWVhYjgwMzZiZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yY2QwYzEwMDJiMmY0ZjAyODgwZWQzZjU5YmUxYWI0NSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE0MDMzNTg4ODMzOSwxNDQuOTYwNDcxMTk5NDUzNzQpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82MWVjOGU5NDI0MjE0YzE2YjczY2I1Yjg5NzA4NWRhYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lOGZhNGFiZjliMDU0MWU0OTczNTM1ODJhODc0MDIzMyA9ICQoJzxkaXYgaWQ9Imh0bWxfZThmYTRhYmY5YjA1NDFlNDk3MzUzNTgyYTg3NDAyMzMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvc2V0dGE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzYxZWM4ZTk0MjQyMTRjMTZiNzNjYjViODk3MDg1ZGFjLnNldENvbnRlbnQoaHRtbF9lOGZhNGFiZjliMDU0MWU0OTczNTM1ODJhODc0MDIzMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yY2QwYzEwMDJiMmY0ZjAyODgwZWQzZjU5YmUxYWI0NS5iaW5kUG9wdXAocG9wdXBfNjFlYzhlOTQyNDIxNGMxNmI3M2NiNWI4OTcwODVkYWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMWViOTY4NTM1YzNhNDhiZWFmNTE4ZWMyNjcyMDE3MGIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIxNjg3MTE3ODM1MiwxNDQuOTYwNTA4Njc2MzM3NTgpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81Zjg5MWMwNjViOTU0Mjk1YmVlNTdjN2NmNDQ2NDliZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jN2EyNTQzYjUyNWE0MjY3ODIyY2Y4MWVlNTRlMzYxNiA9ICQoJzxkaXYgaWQ9Imh0bWxfYzdhMjU0M2I1MjVhNDI2NzgyMmNmODFlZTU0ZTM2MTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1haG9nYW55IFJvb208L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVmODkxYzA2NWI5NTQyOTViZWU1N2M3Y2Y0NDY0OWJkLnNldENvbnRlbnQoaHRtbF9jN2EyNTQzYjUyNWE0MjY3ODIyY2Y4MWVlNTRlMzYxNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8xZWI5Njg1MzVjM2E0OGJlYWY1MThlYzI2NzIwMTcwYi5iaW5kUG9wdXAocG9wdXBfNWY4OTFjMDY1Yjk1NDI5NWJlZTU3YzdjZjQ0NjQ5YmQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOTQ5Y2U1NmY5ZGQ3NDQ1NmE1NGE0ZmM2YTBhZTNhMDQgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE2OTkzODg3NTA5MjMsMTQ0Ljk2NTY3MjU5OTI5NTAzKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTU5MWNmNDgxYzRmNDQ4NzgwMDJiMzQzOGVhOWZmOTcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOGY3ZjcyNjE5Y2Q1NGQzMjljZTVkZTIwY2FjNjQwYjMgPSAkKCc8ZGl2IGlkPSJodG1sXzhmN2Y3MjYxOWNkNTRkMzI5Y2U1ZGUyMGNhYzY0MGIzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZWdyYXZlcyBTdHJlZXQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU1OTFjZjQ4MWM0ZjQ0ODc4MDAyYjM0MzhlYTlmZjk3LnNldENvbnRlbnQoaHRtbF84ZjdmNzI2MTljZDU0ZDMyOWNlNWRlMjBjYWM2NDBiMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85NDljZTU2ZjlkZDc0NDU2YTU0YTRmYzZhMGFlM2EwNC5iaW5kUG9wdXAocG9wdXBfNTU5MWNmNDgxYzRmNDQ4NzgwMDJiMzQzOGVhOWZmOTcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMmQyMTRlYzlkYTFmNDZjM2JmYjhhOWYzNmRiOWQxODYgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3OTk2MjY4NjQ3MDE1LDE0NC45NjgxOTM2NjY5NjMxNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzcyMDIxY2EyMGRlYjQ0NjQ4MDAyNDRiZTk3MTBjYTZiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NkZjgyNjIwZDM4NjQ4ODY5MjllMWNhZTU0MmRlNmIyID0gJCgnPGRpdiBpZD0iaHRtbF9jZGY4MjYyMGQzODY0ODg2OTI5ZTFjYWU1NDJkZTZiMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmVkZXJhdGlvbiBTcXVhcmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzcyMDIxY2EyMGRlYjQ0NjQ4MDAyNDRiZTk3MTBjYTZiLnNldENvbnRlbnQoaHRtbF9jZGY4MjYyMGQzODY0ODg2OTI5ZTFjYWU1NDJkZTZiMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8yZDIxNGVjOWRhMWY0NmMzYmZiOGE5ZjM2ZGI5ZDE4Ni5iaW5kUG9wdXAocG9wdXBfNzIwMjFjYTIwZGViNDQ2NDgwMDI0NGJlOTcxMGNhNmIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNmY3NWEyOWMxNTg0NDc1NGE0NWRjZjIwNjI5NDhiZmEgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NjAzNTkwNDc5MSwxNDQuOTY1OTUzNTU5NjU0MTcpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wZmVjNjA2YWJlYzM0ZWMyOTYzNDljYjA3MDg3OTg1NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82MzRiOGI3NzIzNzY0YzYwOTY4YzYxMGRmMDdkOTEzZiA9ICQoJzxkaXYgaWQ9Imh0bWxfNjM0YjhiNzcyMzc2NGM2MDk2OGM2MTBkZjA3ZDkxM2YiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxpdHRsZSBDdXBjYWtlczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGZlYzYwNmFiZWMzNGVjMjk2MzQ5Y2IwNzA4Nzk4NTYuc2V0Q29udGVudChodG1sXzYzNGI4Yjc3MjM3NjRjNjA5NjhjNjEwZGYwN2Q5MTNmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzZmNzVhMjljMTU4NDQ3NTRhNDVkY2YyMDYyOTQ4YmZhLmJpbmRQb3B1cChwb3B1cF8wZmVjNjA2YWJlYzM0ZWMyOTYzNDljYjA3MDg3OTg1Nik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9iN2VlYjFlNmRkMTY0MjI5YjM5ZTllMmFmODAyMGY0OCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIzNTQwNzg5MDg3NCwxNDQuOTU5ODM1MTYzMTIxNjIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jMWY5ZWExZGMwYmI0NGQ2YmFiYjZiYTMwYjY0ZjhlMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84ZDRmZjRlMGM2ZTE0YWI3OGM2NWFiZjJhOTg2MjFjMCA9ICQoJzxkaXYgaWQ9Imh0bWxfOGQ0ZmY0ZTBjNmUxNGFiNzhjNjVhYmYyYTk4NjIxYzAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkF0cml1bSBCYXI8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2MxZjllYTFkYzBiYjQ0ZDZiYWJiNmJhMzBiNjRmOGUyLnNldENvbnRlbnQoaHRtbF84ZDRmZjRlMGM2ZTE0YWI3OGM2NWFiZjJhOTg2MjFjMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9iN2VlYjFlNmRkMTY0MjI5YjM5ZTllMmFmODAyMGY0OC5iaW5kUG9wdXAocG9wdXBfYzFmOWVhMWRjMGJiNDRkNmJhYmI2YmEzMGI2NGY4ZTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZjBlZWNlNDZkZDZiNGQxYmIzZDhjNGQxYWVjMzMxOTggPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NTEsMTQ0Ljk2MTcpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wNmY4NWViYzc3MjY0NDIyOTRkNDYxMDZhNjVkMTU4MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81ZDE1ZGExMzdjOTg0YWRiOWRmMDZjZDVkMjNhOGFhNCA9ICQoJzxkaXYgaWQ9Imh0bWxfNWQxNWRhMTM3Yzk4NGFkYjlkZjA2Y2Q1ZDIzYThhYTQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFsbCBTdGFyIENvbWljczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDZmODVlYmM3NzI2NDQyMjk0ZDQ2MTA2YTY1ZDE1ODMuc2V0Q29udGVudChodG1sXzVkMTVkYTEzN2M5ODRhZGI5ZGYwNmNkNWQyM2E4YWE0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2YwZWVjZTQ2ZGQ2YjRkMWJiM2Q4YzRkMWFlYzMzMTk4LmJpbmRQb3B1cChwb3B1cF8wNmY4NWViYzc3MjY0NDIyOTRkNDYxMDZhNjVkMTU4Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85NGQzY2FlNmRkMDg0ZDUzODQ1NzJhNDQ0NGM1NTFiMSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTc5NTA4NTc5MzE0NywxNDQuOTY1NDI2Nzk3NTg4ODMpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wZDAwYmQzZGEzNDE0ZDUxYTViYWNjZWE0ZjUwNGZlYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zODI2ODEzNGRlYjY0ZTI1YjM5MDRlYzQ1NGMyOGUzNyA9ICQoJzxkaXYgaWQ9Imh0bWxfMzgyNjgxMzRkZWI2NGUyNWIzOTA0ZWM0NTRjMjhlMzciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvdWJsZVRyZWUgYnkgSGlsdG9uIE1lbGJvdXJuZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGQwMGJkM2RhMzQxNGQ1MWE1YmFjY2VhNGY1MDRmZWEuc2V0Q29udGVudChodG1sXzM4MjY4MTM0ZGViNjRlMjViMzkwNGVjNDU0YzI4ZTM3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzk0ZDNjYWU2ZGQwODRkNTM4NDU3MmE0NDQ0YzU1MWIxLmJpbmRQb3B1cChwb3B1cF8wZDAwYmQzZGEzNDE0ZDUxYTViYWNjZWE0ZjUwNGZlYSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lNjI5OTI5OGZhNWE0ZWRiYmZiYTAxMzU4MWRkMzc2NiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIwOTA3ODUxODMwNSwxNDQuOTU5NzQ4Mzk3NTM3OTQpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lN2I2MDZmZjJjNjU0MzRkYTk3Mjg1MzZhYTU0NmViNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMDExYjQzNWY4NTM0YmI4ODBjZTI4YzgxZWQzMmY0ZSA9ICQoJzxkaXYgaWQ9Imh0bWxfMjAxMWI0MzVmODUzNGJiODgwY2UyOGM4MWVkMzJmNGUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPktva288L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U3YjYwNmZmMmM2NTQzNGRhOTcyODUzNmFhNTQ2ZWI1LnNldENvbnRlbnQoaHRtbF8yMDExYjQzNWY4NTM0YmI4ODBjZTI4YzgxZWQzMmY0ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lNjI5OTI5OGZhNWE0ZWRiYmZiYTAxMzU4MWRkMzc2Ni5iaW5kUG9wdXAocG9wdXBfZTdiNjA2ZmYyYzY1NDM0ZGE5NzI4NTM2YWE1NDZlYjUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNGU4NGIxNGIxNzcyNGExZWI4NjJmNTM0NDUyNjBmYmQgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE5NTk0MjA4NjQ2NzksMTQ0Ljk2NzcyNDQ5MjQyMjYpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hYmZmNGEyNmI0NDE0YTc1YjIzMzdjYWI2ZDY4ZDJhYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jM2U3OWUyZWJmNGM0YjkzYTlhY2VmYWU2OGU2NzI2YyA9ICQoJzxkaXYgaWQ9Imh0bWxfYzNlNzllMmViZjRjNGI5M2E5YWNlZmFlNjhlNjcyNmMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNha8OpIFJlc3RhdXJhbnQgYW5kIEJhcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYWJmZjRhMjZiNDQxNGE3NWIyMzM3Y2FiNmQ2OGQyYWMuc2V0Q29udGVudChodG1sX2MzZTc5ZTJlYmY0YzRiOTNhOWFjZWZhZTY4ZTY3MjZjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzRlODRiMTRiMTc3MjRhMWViODYyZjUzNDQ1MjYwZmJkLmJpbmRQb3B1cChwb3B1cF9hYmZmNGEyNmI0NDE0YTc1YjIzMzdjYWI2ZDY4ZDJhYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl83MGNhYTgwNzFjZTI0ODQ0YjA3OWU2OGMwODgyY2I3OCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjM2MTc3MDczODAxNjYsMTQ0Ljk2MDE3OTMyODkxODQ2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWY2Y2FjZWZhNGExNGZlOGEzNDhkOGZjMzAzZTVmOGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTZmMjY4OTBmNGZlNGJmNThhZDkyZDk3OTI1N2FhMTAgPSAkKCc8ZGl2IGlkPSJodG1sX2U2ZjI2ODkwZjRmZTRiZjU4YWQ5MmQ5NzkyNTdhYTEwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Dcm93biBQcm9tZW5hZGUgSG90ZWw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlmNmNhY2VmYTRhMTRmZThhMzQ4ZDhmYzMwM2U1ZjhkLnNldENvbnRlbnQoaHRtbF9lNmYyNjg5MGY0ZmU0YmY1OGFkOTJkOTc5MjU3YWExMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl83MGNhYTgwNzFjZTI0ODQ0YjA3OWU2OGMwODgyY2I3OC5iaW5kUG9wdXAocG9wdXBfOWY2Y2FjZWZhNGExNGZlOGEzNDhkOGZjMzAzZTVmOGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjBjOGExM2E5NDFiNDZhOTg5N2QxODNiZTY4M2MwOGIgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NzQ3NTExMDYyMjY1LDE0NC45NjQ3OTg3ODg4MTM2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzE1OGEyN2M3NTE1NDAzY2I2YTM2MDk1ZDlkMzYzNzAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmNmZTY2MjIwYWFhNGJkZTlkOTYyYWE5MzJmY2U5NWQgPSAkKCc8ZGl2IGlkPSJodG1sXzJjZmU2NjIyMGFhYTRiZGU5ZDk2MmFhOTMyZmNlOTVkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EYWlzbzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzE1OGEyN2M3NTE1NDAzY2I2YTM2MDk1ZDlkMzYzNzAuc2V0Q29udGVudChodG1sXzJjZmU2NjIyMGFhYTRiZGU5ZDk2MmFhOTMyZmNlOTVkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzIwYzhhMTNhOTQxYjQ2YTk4OTdkMTgzYmU2ODNjMDhiLmJpbmRQb3B1cChwb3B1cF9jMTU4YTI3Yzc1MTU0MDNjYjZhMzYwOTVkOWQzNjM3MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9lYjk2NzdjMmM5MjQ0Y2Q4OTg5ZDVmMWI4N2QzMmY4YyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTczMzQ0MjUwNDA2MDYsMTQ0Ljk2Mjk0MjE4NDc1NDc1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmI1MDI1N2Q3ZWQyNGRmNzllOWJiM2QxNDliMjk4ODYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2ZmMGQxYzYxYjNiNDE2MjkzZTNkM2Q5NmIxNTVkODcgPSAkKCc8ZGl2IGlkPSJodG1sX2NmZjBkMWM2MWIzYjQxNjI5M2UzZDNkOTZiMTU1ZDg3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdXh0YWJ1cmdlcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmI1MDI1N2Q3ZWQyNGRmNzllOWJiM2QxNDliMjk4ODYuc2V0Q29udGVudChodG1sX2NmZjBkMWM2MWIzYjQxNjI5M2UzZDNkOTZiMTU1ZDg3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2ViOTY3N2MyYzkyNDRjZDg5ODlkNWYxYjg3ZDMyZjhjLmJpbmRQb3B1cChwb3B1cF9mYjUwMjU3ZDdlZDI0ZGY3OWU5YmIzZDE0OWIyOTg4Nik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8xN2Q5MjMyYzc0ODQ0NWE5YmVmNTcwZGY1MjNiY2YxYyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIwMjUsMTQ0Ljk1OTcyNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I2NGJjMDg0Y2YyMjRlNzY4OGJjZTk4N2I4YTQ2MTc4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MzMTMxMmQ0N2Y2ODRiNzI5YjQ2YjU2ZjIzOGE4N2FmID0gJCgnPGRpdiBpZD0iaHRtbF9jMzEzMTJkNDdmNjg0YjcyOWI0NmI1NmYyMzhhODdhZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9idTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjY0YmMwODRjZjIyNGU3Njg4YmNlOTg3YjhhNDYxNzguc2V0Q29udGVudChodG1sX2MzMTMxMmQ0N2Y2ODRiNzI5YjQ2YjU2ZjIzOGE4N2FmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzE3ZDkyMzJjNzQ4NDQ1YTliZWY1NzBkZjUyM2JjZjFjLmJpbmRQb3B1cChwb3B1cF9iNjRiYzA4NGNmMjI0ZTc2ODhiY2U5ODdiOGE0NjE3OCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9hOWQwOWVmZWZhYzM0ZGFmYjk1NjJlNWNhOTRiODkzMCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE2MTE3NDAwODcxMiwxNDQuOTY4OTA1MjYzMjkwMSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I4MjU4Zjc3MzRmNzQ4ZjliNTc0MzJkODNiZmQ5OTdmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzYwNDE5ZmRmZTYzNjQ2OTJiMjIxNDA1ZTdiYTNlODdhID0gJCgnPGRpdiBpZD0iaHRtbF82MDQxOWZkZmU2MzY0NjkyYjIyMTQwNWU3YmEzZTg3YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGxheWhvdXNlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iODI1OGY3NzM0Zjc0OGY5YjU3NDMyZDgzYmZkOTk3Zi5zZXRDb250ZW50KGh0bWxfNjA0MTlmZGZlNjM2NDY5MmIyMjE0MDVlN2JhM2U4N2EpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYTlkMDllZmVmYWMzNGRhZmI5NTYyZTVjYTk0Yjg5MzAuYmluZFBvcHVwKHBvcHVwX2I4MjU4Zjc3MzRmNzQ4ZjliNTc0MzJkODNiZmQ5OTdmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzY2Yjg2MjA1NDNiYzQyY2ZhYzU3YjVhOThiOTY3NzY3ID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMjI1NjQyOTc0OTk3LDE0NC45NTkzNDkwNTc2NjE0MyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M0ZTA5ZjFkNjJiMzRiZTliYTlkMTYzMzJhNGM1MGZjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhhZjRmMjI2YzIyMjRiMDE4ZTQ4OWY5ZjgxOThiOGEwID0gJCgnPGRpdiBpZD0iaHRtbF84YWY0ZjIyNmMyMjI0YjAxOGU0ODlmOWY4MTk4YjhhMCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGlubmVyIGJ5IEhlc3RvbiBCbHVtZW50aGFsPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jNGUwOWYxZDYyYjM0YmU5YmE5ZDE2MzMyYTRjNTBmYy5zZXRDb250ZW50KGh0bWxfOGFmNGYyMjZjMjIyNGIwMThlNDg5ZjlmODE5OGI4YTApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNjZiODYyMDU0M2JjNDJjZmFjNTdiNWE5OGI5Njc3NjcuYmluZFBvcHVwKHBvcHVwX2M0ZTA5ZjFkNjJiMzRiZTliYTlkMTYzMzJhNGM1MGZjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzFjNjZkZDVmNjRmZTRhZDlhYmE0ZGMyMmRlMDA0ZWVmID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxNzQxNzQ5NDQzNzY1LDE0NC45NjQ2MDY1NjY3NDkzMiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U2MzBhY2Y0NzlhMjQ0YzU4NGZiMjk0ZWIwY2ZmZWMzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NlMjZlMWQwMjU3ZDQ2ZmM4NjI4MmMxMzkwNWMzYzI1ID0gJCgnPGRpdiBpZD0iaHRtbF9jZTI2ZTFkMDI1N2Q0NmZjODYyODJjMTM5MDVjM2MyNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TmFuZG8mIzM5O3M8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U2MzBhY2Y0NzlhMjQ0YzU4NGZiMjk0ZWIwY2ZmZWMzLnNldENvbnRlbnQoaHRtbF9jZTI2ZTFkMDI1N2Q0NmZjODYyODJjMTM5MDVjM2MyNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8xYzY2ZGQ1ZjY0ZmU0YWQ5YWJhNGRjMjJkZTAwNGVlZi5iaW5kUG9wdXAocG9wdXBfZTYzMGFjZjQ3OWEyNDRjNTg0ZmIyOTRlYjBjZmZlYzMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMDBkYmY2YjI0YjM0NGNmYWFhNmEwMGE4N2QzMTIzOWQgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE4MDE5MzYyMzc4MTY2LDE0NC45NjUwNjAwNDE4MzA3OCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzIyOGJhZWUwNmNkMjQwNWFhNDg5MWU1ZDQ1ZTBhNjY3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhiZWMxNTIxYTBkYzRkYTY5YzUxZDBiMjYxMWE1ZTFmID0gJCgnPGRpdiBpZD0iaHRtbF84YmVjMTUyMWEwZGM0ZGE2OWM1MWQwYjI2MTFhNWUxZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2Fsa2VyJiMzOTtzIERvdWdobnV0czwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMjI4YmFlZTA2Y2QyNDA1YWE0ODkxZTVkNDVlMGE2Njcuc2V0Q29udGVudChodG1sXzhiZWMxNTIxYTBkYzRkYTY5YzUxZDBiMjYxMWE1ZTFmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzAwZGJmNmIyNGIzNDRjZmFhYTZhMDBhODdkMzEyMzlkLmJpbmRQb3B1cChwb3B1cF8yMjhiYWVlMDZjZDI0MDVhYTQ4OTFlNWQ0NWUwYTY2Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9kMzU0ZDY4Njc4MDc0MDRhOTk1ODRkMzY5ZmM3YTI3ZSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTczNDExMzM2MTQ0MiwxNDQuOTY1ODQ5MDg2NTY3MjYpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84MGFlM2M0M2Q2MjQ0MWI3YWQxZDIyOTdiZTZkNDhmNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jZDI5MzVjZGY4MzA0MGU5YTI0NTJlMDE3YmQxZWEyYSA9ICQoJzxkaXYgaWQ9Imh0bWxfY2QyOTM1Y2RmODMwNDBlOWEyNDUyZTAxN2JkMWVhMmEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkdyaWxsJiMzOTtkPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84MGFlM2M0M2Q2MjQ0MWI3YWQxZDIyOTdiZTZkNDhmNS5zZXRDb250ZW50KGh0bWxfY2QyOTM1Y2RmODMwNDBlOWEyNDUyZTAxN2JkMWVhMmEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZDM1NGQ2ODY3ODA3NDA0YTk5NTg0ZDM2OWZjN2EyN2UuYmluZFBvcHVwKHBvcHVwXzgwYWUzYzQzZDYyNDQxYjdhZDFkMjI5N2JlNmQ0OGY1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2M3ZmZlOTk3NGZiMTQ1NTRhMmJlY2Q1MTNiMDc4MWExID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxODQ0ODExMzA5ODgyLDE0NC45NjI2OTg4OTk2MzY3MyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQyYTAwMWI1MTExZTQ5YmViZDEzMTE0ZDYwOTJkM2E1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM1M2Q0NGQwODAzYzQ0ODk5MGFlNjY4ZjA0ZjlkNmFlID0gJCgnPGRpdiBpZD0iaHRtbF8zNTNkNDRkMDgwM2M0NDg5OTBhZTY2OGYwNGY5ZDZhZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFwZXIgVGlnZXIgRXNwcmVzc288L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQyYTAwMWI1MTExZTQ5YmViZDEzMTE0ZDYwOTJkM2E1LnNldENvbnRlbnQoaHRtbF8zNTNkNDRkMDgwM2M0NDg5OTBhZTY2OGYwNGY5ZDZhZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jN2ZmZTk5NzRmYjE0NTU0YTJiZWNkNTEzYjA3ODFhMS5iaW5kUG9wdXAocG9wdXBfNDJhMDAxYjUxMTFlNDliZWJkMTMxMTRkNjA5MmQzYTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzljZWJkNDE1OTc2NDAxYzhhNjgyMjU2MWU1M2M2ZTYgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NTA5NjQ5MzE4MTA0LDE0NC45NjMwMDA3NjMxNTQ4KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjVmZDg5ZTg2NDQ0NDVlM2I4ZDRlNDAxZDhiOGIxNzcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDRlMjI5OTgzZjJhNDkzOTg0ZDUxOTlmYjdmM2EwOTIgPSAkKCc8ZGl2IGlkPSJodG1sXzA0ZTIyOTk4M2YyYTQ5Mzk4NGQ1MTk5ZmI3ZjNhMDkyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5WYXBpYW5vPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mNWZkODllODY0NDQ0NWUzYjhkNGU0MDFkOGI4YjE3Ny5zZXRDb250ZW50KGh0bWxfMDRlMjI5OTgzZjJhNDkzOTg0ZDUxOTlmYjdmM2EwOTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfYzljZWJkNDE1OTc2NDAxYzhhNjgyMjU2MWU1M2M2ZTYuYmluZFBvcHVwKHBvcHVwX2Y1ZmQ4OWU4NjQ0NDQ1ZTNiOGQ0ZTQwMWQ4YjhiMTc3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzFjZWNhYzFjMzVmNDQ3NWNhNzU5N2UyNmRiMGNiOWQzID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxOTQ5NDgzNDc1OTU2LDE0NC45NjAzNzM2MzgwODIwNSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFmOTk0MWUxMTgwZjRhOGI4NGJiMWQ1YjE5NWUzMWZiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA3ZjhiYmFjZGZjMjRkMmZiOTc4OGJlNzQwMTdiYjcxID0gJCgnPGRpdiBpZD0iaHRtbF8wN2Y4YmJhY2RmYzI0ZDJmYjk3ODhiZTc0MDE3YmI3MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SW1taWdyYXRpb24gTXVzZXVtPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xZjk5NDFlMTE4MGY0YThiODRiYjFkNWIxOTVlMzFmYi5zZXRDb250ZW50KGh0bWxfMDdmOGJiYWNkZmMyNGQyZmI5Nzg4YmU3NDAxN2JiNzEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMWNlY2FjMWMzNWY0NDc1Y2E3NTk3ZTI2ZGIwY2I5ZDMuYmluZFBvcHVwKHBvcHVwXzFmOTk0MWUxMTgwZjRhOGI4NGJiMWQ1YjE5NWUzMWZiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzY0YjhiMzRjNDUxNzRmMDRiY2QwNmFkNTdmMjZkMTJhID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxODIxOTYyNDI4MDE5LDE0NC45NjEwNTMzNjY0NjEyKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzJjYzkwZTdiZDMxNGQzZWEzZDM5ZGUwN2JjNzc0N2YgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDg4OTE5Y2E5YjA1NDMyZTg0ODRkNWRjYzU1YzRkOWUgPSAkKCc8ZGl2IGlkPSJodG1sXzA4ODkxOWNhOWIwNTQzMmU4NDg0ZDVkY2M1NWM0ZDllIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TYWx1bWluaXN0aTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzJjYzkwZTdiZDMxNGQzZWEzZDM5ZGUwN2JjNzc0N2Yuc2V0Q29udGVudChodG1sXzA4ODkxOWNhOWIwNTQzMmU4NDg0ZDVkY2M1NWM0ZDllKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzY0YjhiMzRjNDUxNzRmMDRiY2QwNmFkNTdmMjZkMTJhLmJpbmRQb3B1cChwb3B1cF9jMmNjOTBlN2JkMzE0ZDNlYTNkMzlkZTA3YmM3NzQ3Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9kNzZmNzA5YjU1NzU0NWJjODJhZWEzNTc3MjA2YmY0OSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTY5MywxNDQuOTY1NzI2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfY2NlYjJjZmM2MjE0NDgzOGIzODllZThkN2UwY2ZkMmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzA5MDQwMjdkZjQzNGU4M2FlZWQ4MDk1Y2ZkY2NkYWYgPSAkKCc8ZGl2IGlkPSJodG1sXzcwOTA0MDI3ZGY0MzRlODNhZWVkODA5NWNmZGNjZGFmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DdXAgT2YgVHJ1dGg8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2NjZWIyY2ZjNjIxNDQ4MzhiMzg5ZWU4ZDdlMGNmZDJlLnNldENvbnRlbnQoaHRtbF83MDkwNDAyN2RmNDM0ZTgzYWVlZDgwOTVjZmRjY2RhZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9kNzZmNzA5YjU1NzU0NWJjODJhZWEzNTc3MjA2YmY0OS5iaW5kUG9wdXAocG9wdXBfY2NlYjJjZmM2MjE0NDgzOGIzODllZThkN2UwY2ZkMmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMGEzNGRhMmI0MjUwNDM3Y2E4YTRkYjJhZGZhNmYwMGQgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIyNzIyMzA4OTY3OTQsMTQ0Ljk1OTA1NzczNjE0MjQ2KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzZhMjNkZTJjOGQwNGRiNmFiODc5ZDQ3N2FlZGIzMjMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTRmMmE0YjU1NjU1NGE0OTg3Y2FhYzEwY2Q0NWFkMmQgPSAkKCc8ZGl2IGlkPSJodG1sX2E0ZjJhNGI1NTY1NTRhNDk4N2NhYWMxMGNkNDVhZDJkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TcGllZ2Vsd29ybGQgRW1waXJlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zNmEyM2RlMmM4ZDA0ZGI2YWI4NzlkNDc3YWVkYjMyMy5zZXRDb250ZW50KGh0bWxfYTRmMmE0YjU1NjU1NGE0OTg3Y2FhYzEwY2Q0NWFkMmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMGEzNGRhMmI0MjUwNDM3Y2E4YTRkYjJhZGZhNmYwMGQuYmluZFBvcHVwKHBvcHVwXzM2YTIzZGUyYzhkMDRkYjZhYjg3OWQ0NzdhZWRiMzIzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2U1YmJkNTE4YTJiMzRhYjI4NmVkODExNTA1NDg1MTEwID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxNzI0NDQ3MjA4ODQyLDE0NC45NjM3NDY4OTAzNTcpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hYzIwYjU4YzBjNDk0MTRjYjIyZTNmZjMzMzU1MmUxMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xMTlmN2VmNmZmOTk0NDBiYjIyMzJiMjM4NjUxMzI0NCA9ICQoJzxkaXYgaWQ9Imh0bWxfMTE5ZjdlZjZmZjk5NDQwYmIyMjMyYjIzODY1MTMyNDQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvYm90IFN1c2hpPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hYzIwYjU4YzBjNDk0MTRjYjIyZTNmZjMzMzU1MmUxMy5zZXRDb250ZW50KGh0bWxfMTE5ZjdlZjZmZjk5NDQwYmIyMjMyYjIzODY1MTMyNDQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZTViYmQ1MThhMmIzNGFiMjg2ZWQ4MTE1MDU0ODUxMTAuYmluZFBvcHVwKHBvcHVwX2FjMjBiNThjMGM0OTQxNGNiMjJlM2ZmMzMzNTUyZTEzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2Y1NDU2NjkyOTNjZTQ2ODk4OTBmYzg2OTE0NmMyNjliID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxODA3OTEwOTMzOTA1LDE0NC45NjI3MzI4MjI5MzQwNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NiNGM0ZTAzMTc2YTRhNDZhY2I0ZjA1ZjJlNzViM2ExID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY1Y2FmYzI0ZTFhNDQxMGI4MmQzODkzZTMzNzQ5NmQwID0gJCgnPGRpdiBpZD0iaHRtbF82NWNhZmMyNGUxYTQ0MTBiODJkMzg5M2UzMzc0OTZkMCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Qm9uZCBMb3VuZ2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2NiNGM0ZTAzMTc2YTRhNDZhY2I0ZjA1ZjJlNzViM2ExLnNldENvbnRlbnQoaHRtbF82NWNhZmMyNGUxYTQ0MTBiODJkMzg5M2UzMzc0OTZkMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9mNTQ1NjY5MjkzY2U0Njg5ODkwZmM4NjkxNDZjMjY5Yi5iaW5kUG9wdXAocG9wdXBfY2I0YzRlMDMxNzZhNGE0NmFjYjRmMDVmMmU3NWIzYTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZjE1OTk1M2M5NjkwNDJkNThjYWYwOWI3OWU2ZjJhM2QgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIyMzU1NzU1NDUwNjQ0LDE0NC45NTg5MDI5MzAwMjQ5OCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg0YzhlNTU2YzU2MzQ5MmNhNTNmODgzMGE4MjM2MmU3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzJhMmIyY2U0MWE0MzQyNmI4OTdlODM2YTgyMmEzZDE5ID0gJCgnPGRpdiBpZD0iaHRtbF8yYTJiMmNlNDFhNDM0MjZiODk3ZTgzNmE4MjJhM2QxOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIERlbjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODRjOGU1NTZjNTYzNDkyY2E1M2Y4ODMwYTgyMzYyZTcuc2V0Q29udGVudChodG1sXzJhMmIyY2U0MWE0MzQyNmI4OTdlODM2YTgyMmEzZDE5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2YxNTk5NTNjOTY5MDQyZDU4Y2FmMDliNzllNmYyYTNkLmJpbmRQb3B1cChwb3B1cF84NGM4ZTU1NmM1NjM0OTJjYTUzZjg4MzBhODIzNjJlNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl83Y2JlYjQ3ODRhZTE0OGY0OWI5Yzg4MzNkOGNjODQ2NyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIwNDI1NTg5MiwxNDQuOTU5Mjc0NDY1NTgzNyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc3NjUxNjJhMWQwMjQ5Mzg4NGFkMDE4NTg5OGMyZTIyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFiZDA2YjFkMWVlZDRiMmM4ZWNkYzA4NGIyNjgwZDhhID0gJCgnPGRpdiBpZD0iaHRtbF8xYmQwNmIxZDFlZWQ0YjJjOGVjZGMwODRiMjY4MGQ4YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmlzdHJvIEd1aWxsYXVtZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzc2NTE2MmExZDAyNDkzODg0YWQwMTg1ODk4YzJlMjIuc2V0Q29udGVudChodG1sXzFiZDA2YjFkMWVlZDRiMmM4ZWNkYzA4NGIyNjgwZDhhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzdjYmViNDc4NGFlMTQ4ZjQ5YjljODgzM2Q4Y2M4NDY3LmJpbmRQb3B1cChwb3B1cF83NzY1MTYyYTFkMDI0OTM4ODRhZDAxODU4OThjMmUyMik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8xZDAwZTg5ODcwYTM0YTVhYjM4YjI5NjM2Mzg2NmJkNiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTc3MDU3Mjg1NTY3NSwxNDQuOTY1OTM2ODI0NzEzMDUpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83OTkxZjgxZWI4YTI0YTkwOTFiZDJjZGY5MmMxYTFmMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85NTAxNzM5ZjBjNjk0NWNjOGU1NzM5MzI4YjRlOWY2NSA9ICQoJzxkaXYgaWQ9Imh0bWxfOTUwMTczOWYwYzY5NDVjYzhlNTczOTMyOGI0ZTlmNjUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlR1bGlwIENvZmZlZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzk5MWY4MWViOGEyNGE5MDkxYmQyY2RmOTJjMWExZjAuc2V0Q29udGVudChodG1sXzk1MDE3MzlmMGM2OTQ1Y2M4ZTU3MzkzMjhiNGU5ZjY1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzFkMDBlODk4NzBhMzRhNWFiMzhiMjk2MzYzODY2YmQ2LmJpbmRQb3B1cChwb3B1cF83OTkxZjgxZWI4YTI0YTkwOTFiZDJjZGY5MmMxYTFmMCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9mZWNhZTYyMGMzMmY0MzhlYWE1N2UyOTZkOGJhYjEwNSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTY5NTY5MDIzOTY4NCwxNDQuOTY1NjE3MjgzNDM1ODUpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xMTQ1MjEzZGUzMGY0Mjk5YmY4MTNiYTgxMWIzM2ZjYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jMjNjODg5OWVhNmM0ODExYjcyMzI0MDcxYmVkYTEzZSA9ICQoJzxkaXYgaWQ9Imh0bWxfYzIzYzg4OTllYTZjNDgxMWI3MjMyNDA3MWJlZGExM2UiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJNQiBDYWZlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMTQ1MjEzZGUzMGY0Mjk5YmY4MTNiYTgxMWIzM2ZjYS5zZXRDb250ZW50KGh0bWxfYzIzYzg4OTllYTZjNDgxMWI3MjMyNDA3MWJlZGExM2UpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfZmVjYWU2MjBjMzJmNDM4ZWFhNTdlMjk2ZDhiYWIxMDUuYmluZFBvcHVwKHBvcHVwXzExNDUyMTNkZTMwZjQyOTliZjgxM2JhODExYjMzZmNhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyX2QyNGQwOGZmNDY4YTRiNmFiMTk0YTJmYzFhNjY3OWJlID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxNzI1MjE5NDI2MDM0LDE0NC45NjM3MDMwNjAwMTQxOCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNjYzBhZjMwZTI1NDQ1OWFhM2ZmN2ZmNDNjOTA4ZTdlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2EwMDMzYjg4MzZhZDRmYmFhZTRhYzIwNDRmZGE1MWFkID0gJCgnPGRpdiBpZD0iaHRtbF9hMDAzM2I4ODM2YWQ0ZmJhYWU0YWMyMDQ0ZmRhNTFhZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWVuc291c2FpIE11Z2VuIOWkoueOhDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2NjMGFmMzBlMjU0NDU5YWEzZmY3ZmY0M2M5MDhlN2Uuc2V0Q29udGVudChodG1sX2EwMDMzYjg4MzZhZDRmYmFhZTRhYzIwNDRmZGE1MWFkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2QyNGQwOGZmNDY4YTRiNmFiMTk0YTJmYzFhNjY3OWJlLmJpbmRQb3B1cChwb3B1cF8zY2MwYWYzMGUyNTQ0NTlhYTNmZjdmZjQzYzkwOGU3ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8wNmNmMGExMjNjMWM0MjY5YTQxOWY1Yzc4YTQzOTEyZSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIyNDYzOTk0NzY0OSwxNDQuOTYwOTI0MDIwNTQ1MDQpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83YTM0Y2ZhOGE4ZGU0YzdiYTEzN2UzNDg1NTVkNjY1ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wMDZiNTY0ZmJlN2Y0ZDFlODVkYWZjNGE4NDJjNzg0YSA9ICQoJzxkaXYgaWQ9Imh0bWxfMDA2YjU2NGZiZTdmNGQxZTg1ZGFmYzRhODQyYzc4NGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBXYWl0aW5nIFJvb208L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdhMzRjZmE4YThkZTRjN2JhMTM3ZTM0ODU1NWQ2NjVmLnNldENvbnRlbnQoaHRtbF8wMDZiNTY0ZmJlN2Y0ZDFlODVkYWZjNGE4NDJjNzg0YSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8wNmNmMGExMjNjMWM0MjY5YTQxOWY1Yzc4YTQzOTEyZS5iaW5kUG9wdXAocG9wdXBfN2EzNGNmYThhOGRlNGM3YmExMzdlMzQ4NTU1ZDY2NWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNWQ5MGM1ZTg5NDg1NGFlNTkzZjc2N2Y1OGZiMjk4Y2EgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NjIzNTk0ODkyNDc0LDE0NC45NjMxMDQ0MjM2ODc1MyksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MwYjBjZGRkY2I3MzQ5ZTliMjJiOTZjMjBkNThkM2Q0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzJmZDBkZTg3MjA2NzRkZWNhYzk1NDYxMGJmYWE5MTZhID0gJCgnPGRpdiBpZD0iaHRtbF8yZmQwZGU4NzIwNjc0ZGVjYWM5NTQ2MTBiZmFhOTE2YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UHJvbnRvIG9uIEZsaW5kZXJzPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMGIwY2RkZGNiNzM0OWU5YjIyYjk2YzIwZDU4ZDNkNC5zZXRDb250ZW50KGh0bWxfMmZkMGRlODcyMDY3NGRlY2FjOTU0NjEwYmZhYTkxNmEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfNWQ5MGM1ZTg5NDg1NGFlNTkzZjc2N2Y1OGZiMjk4Y2EuYmluZFBvcHVwKHBvcHVwX2MwYjBjZGRkY2I3MzQ5ZTliMjJiOTZjMjBkNThkM2Q0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzkzODhiZWVjNTk0MjQ4MjBhMTIyYWNmYmRmNjRmYmNjID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgxNzAzNTM5ODgxMjg0LDE0NC45NjUxMTQxNjQxMTI1MiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzUxMmIxMDEwYjI3NjRiYzE5MTA4MThmMThkNDNmYjVkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEwNjU0MGQ0NTc3ODRiZDJhZWMyMjBiODE3ZWJmMGVkID0gJCgnPGRpdiBpZD0iaHRtbF8xMDY1NDBkNDU3Nzg0YmQyYWVjMjIwYjgxN2ViZjBlZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIE1pbGwgSG91c2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzUxMmIxMDEwYjI3NjRiYzE5MTA4MThmMThkNDNmYjVkLnNldENvbnRlbnQoaHRtbF8xMDY1NDBkNDU3Nzg0YmQyYWVjMjIwYjgxN2ViZjBlZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85Mzg4YmVlYzU5NDI0ODIwYTEyMmFjZmJkZjY0ZmJjYy5iaW5kUG9wdXAocG9wdXBfNTEyYjEwMTBiMjc2NGJjMTkxMDgxOGYxOGQ0M2ZiNWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOTExMzc4ZjllNDUyNGVhYWE1MTlkYzUwNGNmYTlkY2EgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE2ODcwMjk2NzE0MjYsMTQ0Ljk2NDM5Mzg3OTAzMjM3KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjU3OWMxNDAyMGYwNGVhMTg5MDU4ZTY1OGFiNmQyODMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2I2YjI4N2ZkZTA2NDQxMjk0YmE5ZmI0MmRkMjdiOWMgPSAkKCc8ZGl2IGlkPSJodG1sX2NiNmIyODdmZGUwNjQ0MTI5NGJhOWZiNDJkZDI3YjljIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaWZ0eWZpdmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I1NzljMTQwMjBmMDRlYTE4OTA1OGU2NThhYjZkMjgzLnNldENvbnRlbnQoaHRtbF9jYjZiMjg3ZmRlMDY0NDEyOTRiYTlmYjQyZGQyN2I5Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85MTEzNzhmOWU0NTI0ZWFhYTUxOWRjNTA0Y2ZhOWRjYS5iaW5kUG9wdXAocG9wdXBfYjU3OWMxNDAyMGYwNGVhMTg5MDU4ZTY1OGFiNmQyODMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMmZhMTNlNmE5ZjBiNDVkODljMjc3ZDU4NmZlYTVlOTAgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODE3NDIzMDMxNjQ0NTcsMTQ0Ljk2NzMwNzE1NjQ0OTU1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzYwY2FjM2JmOTY3NDc0NGFjYWRlMzU4YTNiMjQ1ZGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjdkM2QwNjUxYTFmNGMzNjllMjQ1YmE0MDEyMTBhMjYgPSAkKCc8ZGl2IGlkPSJodG1sXzI3ZDNkMDY1MWExZjRjMzY5ZTI0NWJhNDAxMjEwYTI2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaGxvZSYjMzk7cyBCYXIgLSBZb3VuZyAmYW1wOyBKYWNrc29uczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzYwY2FjM2JmOTY3NDc0NGFjYWRlMzU4YTNiMjQ1ZGUuc2V0Q29udGVudChodG1sXzI3ZDNkMDY1MWExZjRjMzY5ZTI0NWJhNDAxMjEwYTI2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzJmYTEzZTZhOWYwYjQ1ZDg5YzI3N2Q1ODZmZWE1ZTkwLmJpbmRQb3B1cChwb3B1cF8zNjBjYWMzYmY5Njc0NzQ0YWNhZGUzNThhM2IyNDVkZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9hNDYxNzg3NzMzMzA0OGJlODY5MDM0YjUxNDRmYmQ5ZSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTcxOTM3MDM0MDc2MDQsMTQ0Ljk2NTc2OTE1NjYyMzk0KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNmYyZGY3YWE2Y2YwNGVhNTg3YjAyZWEwMjZiNDQ3MWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDlmNjNiMTMxM2Y3NDY1YmJkNGY5ZjNjMGQzMWY5MWIgPSAkKCc8ZGl2IGlkPSJodG1sXzQ5ZjYzYjEzMTNmNzQ2NWJiZDRmOWYzYzBkMzFmOTFiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgT3JnYW5pYyBGb29kICZhbXA7IFdpbmUgRGVsaTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmYyZGY3YWE2Y2YwNGVhNTg3YjAyZWEwMjZiNDQ3MWUuc2V0Q29udGVudChodG1sXzQ5ZjYzYjEzMTNmNzQ2NWJiZDRmOWYzYzBkMzFmOTFiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2E0NjE3ODc3MzMzMDQ4YmU4NjkwMzRiNTE0NGZiZDllLmJpbmRQb3B1cChwb3B1cF82ZjJkZjdhYTZjZjA0ZWE1ODdiMDJlYTAyNmI0NDcxZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl84NmExMTE0YmU3ZDM0ODIwOTFlZmQzZjQxM2YyNjMwYyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIyMjMyNDkwMjM5NCwxNDQuOTU5Nzc1MTc4MzEwMTcpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MGRhNjZhYTMwMjA0YTVjOWVkODhjMzIwMjhmMTM0MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hNTliMzAyODBmN2E0MDhiOGEyY2FkYzZjYzEwZTdlZiA9ICQoJzxkaXYgaWQ9Imh0bWxfYTU5YjMwMjgwZjdhNDA4YjhhMmNhZGM2Y2MxMGU3ZWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBDb25zZXJ2YXRvcnk8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQwZGE2NmFhMzAyMDRhNWM5ZWQ4OGMzMjAyOGYxMzQyLnNldENvbnRlbnQoaHRtbF9hNTliMzAyODBmN2E0MDhiOGEyY2FkYzZjYzEwZTdlZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl84NmExMTE0YmU3ZDM0ODIwOTFlZmQzZjQxM2YyNjMwYy5iaW5kUG9wdXAocG9wdXBfNDBkYTY2YWEzMDIwNGE1YzllZDg4YzMyMDI4ZjEzNDIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMDQwN2JlMTAxMmM0NDQyYWJkOTI1YWE4ZjA1N2EzZTMgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIzMDQ1MzQ1NDI3NzEsMTQ0Ljk2MzUyNjkwMDM2MzMpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kNWNlY2Q3MmJkZjg0ZWFmYjcwNzY3YzhlNDFmZGU0ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ODg2ZTVmZjUzNGU0OGFjOTIxMWQzMWE2MjI3NjMyOSA9ICQoJzxkaXYgaWQ9Imh0bWxfOTg4NmU1ZmY1MzRlNDhhYzkyMTFkMzFhNjIyNzYzMjkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldyYXAgQXBhcnRtZW50czwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDVjZWNkNzJiZGY4NGVhZmI3MDc2N2M4ZTQxZmRlNGYuc2V0Q29udGVudChodG1sXzk4ODZlNWZmNTM0ZTQ4YWM5MjExZDMxYTYyMjc2MzI5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzA0MDdiZTEwMTJjNDQ0MmFiZDkyNWFhOGYwNTdhM2UzLmJpbmRQb3B1cChwb3B1cF9kNWNlY2Q3MmJkZjg0ZWFmYjcwNzY3YzhlNDFmZGU0Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jNTg2MWYwNGViODU0ZDEzYmUwYjJmMGIzYTM4Y2MxMiA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjMxNTk2MDg0NDQ0MywxNDQuOTYwMjIzMTE2NjM5OCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg5MWNjMGI4Nzk5NTRlY2RiNmFhODk1M2Y0Y2NjNmMxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNiYzkxOTNlZDkyZTRhYzk4ZGNkN2RiYmY2M2U2ZWU0ID0gJCgnPGRpdiBpZD0iaHRtbF8zYmM5MTkzZWQ5MmU0YWM5OGRjZDdkYmJmNjNlNmVlNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWVzaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODkxY2MwYjg3OTk1NGVjZGI2YWE4OTUzZjRjY2M2YzEuc2V0Q29udGVudChodG1sXzNiYzkxOTNlZDkyZTRhYzk4ZGNkN2RiYmY2M2U2ZWU0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2M1ODYxZjA0ZWI4NTRkMTNiZTBiMmYwYjNhMzhjYzEyLmJpbmRQb3B1cChwb3B1cF84OTFjYzBiODc5OTU0ZWNkYjZhYTg5NTNmNGNjYzZjMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85MTk2NWZjN2Y0ODE0NGY2OTBmYTdkMzJiMWQ1NWZkMCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MTcyOTM2OTU0MTY4MSwxNDQuOTY3MDMzNjEzMjU4NiksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM0NTMzOTFkZGZiMzRiYjk5NjIxMmE2ZjViMTJmNDAxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FlYjBlNjQ3ODkyNjRjMTE5NDhkNjk2M2U3MTkzMzM0ID0gJCgnPGRpdiBpZD0iaHRtbF9hZWIwZTY0Nzg5MjY0YzExOTQ4ZDY5NjNlNzE5MzMzNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9vZnRvcCBDaWRlciBCYXIgQCBZb3VuZyAmYW1wOyBKYWNrc29uczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzQ1MzM5MWRkZmIzNGJiOTk2MjEyYTZmNWIxMmY0MDEuc2V0Q29udGVudChodG1sX2FlYjBlNjQ3ODkyNjRjMTE5NDhkNjk2M2U3MTkzMzM0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzkxOTY1ZmM3ZjQ4MTQ0ZjY5MGZhN2QzMmIxZDU1ZmQwLmJpbmRQb3B1cChwb3B1cF8zNDUzMzkxZGRmYjM0YmI5OTYyMTJhNmY1YjEyZjQwMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl85ZGUyNzFlNjM1NTI0M2M5OWMyOGI2OGNiMWMxOWM5ZCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjE2NjY3OTgxMTkzMjQsMTQ0Ljk2MDIyMjI0NDI2MjcpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zZmJlYWM1ZDgxMzc0YzRhOTEwYjQ5YzBkZjkyMWY3MSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MjUwYWU0NjgyNWU0YmFkOTc3ZDA2YWFmYjFkMmU5ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfNDI1MGFlNDY4MjVlNGJhZDk3N2QwNmFhZmIxZDJlOWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNpbGtzPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zZmJlYWM1ZDgxMzc0YzRhOTEwYjQ5YzBkZjkyMWY3MS5zZXRDb250ZW50KGh0bWxfNDI1MGFlNDY4MjVlNGJhZDk3N2QwNmFhZmIxZDJlOWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfOWRlMjcxZTYzNTUyNDNjOTljMjhiNjhjYjFjMTljOWQuYmluZFBvcHVwKHBvcHVwXzNmYmVhYzVkODEzNzRjNGE5MTBiNDljMGRmOTIxZjcxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzNmNjU5YThkMTliYTRlMTRiYzQwNzNmNDI1MmRhN2VlID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMTYxODkzMjg2NjkxLDE0NC45NjA3MTUzOTkyMzk1NSksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY5NjU2MGRiNWMwZjQ5NmRhYTk3ZjJlM2Y4MGFiZDgxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc0ZTE1NDI2ZjhiYjQ2OTFiY2FkMzFlZTM4ODVkZGNkID0gJCgnPGRpdiBpZD0iaHRtbF83NGUxNTQyNmY4YmI0NjkxYmNhZDMxZWUzODg1ZGRjZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2x1YiAyMzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjk2NTYwZGI1YzBmNDk2ZGFhOTdmMmUzZjgwYWJkODEuc2V0Q29udGVudChodG1sXzc0ZTE1NDI2ZjhiYjQ2OTFiY2FkMzFlZTM4ODVkZGNkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzNmNjU5YThkMTliYTRlMTRiYzQwNzNmNDI1MmRhN2VlLmJpbmRQb3B1cChwb3B1cF82OTY1NjBkYjVjMGY0OTZkYWE5N2YyZTNmODBhYmQ4MSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8xY2NjM2JhMmE0MDQ0ZGUwOGE3Nzk3NmUyODZiNGZmNCA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIxODUxMjkyNTI3OTQsMTQ0Ljk1OTE5MDE1OTg4NzUpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82OGI0YzE5OWQ3NDQ0NTA2ODQ2ZGM1N2NlZTVjNGI4ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xOWI3ZjdkMzJjMTE0Mjc0YWQzNGI3YzBiMjUyODhmMiA9ICQoJzxkaXYgaWQ9Imh0bWxfMTliN2Y3ZDMyYzExNDI3NGFkMzRiN2MwYjI1Mjg4ZjIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxvbmcgQ2hpbTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjhiNGMxOTlkNzQ0NDUwNjg0NmRjNTdjZWU1YzRiOGQuc2V0Q29udGVudChodG1sXzE5YjdmN2QzMmMxMTQyNzRhZDM0YjdjMGIyNTI4OGYyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzFjY2MzYmEyYTQwNDRkZTA4YTc3OTc2ZTI4NmI0ZmY0LmJpbmRQb3B1cChwb3B1cF82OGI0YzE5OWQ3NDQ0NTA2ODQ2ZGM1N2NlZTVjNGI4ZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9jY2NjMTVhMDA0OTI0M2IzYjFhZDc1NGFkZDBjMjA3OSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjIxMTMxNjQxMzM2MDQsMTQ0Ljk2MjI2OTcyMjQyMTk1KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYThjOTM2M2Q3ZjRmNDM4NTg4ZTUyZDY0MzQ5YjQ4ZDMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTU2ZDQ2ZGIyYjBhNDliMjk4NjRhZWU4MDc3ZDUzOGQgPSAkKCc8ZGl2IGlkPSJodG1sX2E1NmQ0NmRiMmIwYTQ5YjI5ODY0YWVlODA3N2Q1MzhkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GcmVzaHdhdGVyIFBsYWNlIElHQTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYThjOTM2M2Q3ZjRmNDM4NTg4ZTUyZDY0MzQ5YjQ4ZDMuc2V0Q29udGVudChodG1sX2E1NmQ0NmRiMmIwYTQ5YjI5ODY0YWVlODA3N2Q1MzhkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyX2NjY2MxNWEwMDQ5MjQzYjNiMWFkNzU0YWRkMGMyMDc5LmJpbmRQb3B1cChwb3B1cF9hOGM5MzYzZDdmNGY0Mzg1ODhlNTJkNjQzNDliNDhkMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9mZmUxZGQ1MzYwY2E0NmJlOWEyZmViOTE5NWM2YzE2YyA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjI0NDcyOTkzNTc2NTUsMTQ0Ljk1OTA1NjIwMzY0MzQ4KSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDk4ZjgxYTg2ZGFmNGE1NzhlNjU5Yjc5OWI1M2U2MzcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTY5Mzg2MGI3OWM4NDM3YWIwYzFkNGI1NDAzMjEwM2EgPSAkKCc8ZGl2IGlkPSJodG1sX2U2OTM4NjBiNzljODQzN2FiMGMxZDRiNTQwMzIxMDNhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Dcm93biBQYWxsYWRpdW08L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQ5OGY4MWE4NmRhZjRhNTc4ZTY1OWI3OTliNTNlNjM3LnNldENvbnRlbnQoaHRtbF9lNjkzODYwYjc5Yzg0MzdhYjBjMWQ0YjU0MDMyMTAzYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl9mZmUxZGQ1MzYwY2E0NmJlOWEyZmViOTE5NWM2YzE2Yy5iaW5kUG9wdXAocG9wdXBfNDk4ZjgxYTg2ZGFmNGE1NzhlNjU5Yjc5OWI1M2U2MzcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfMjY0YWE2ZGE3NWIyNGZmYWE4NGJiNTljYThlNWU1OWMgPSBuZXcgTC5SZWd1bGFyUG9seWdvbk1hcmtlcigKICAgICAgICAgICAgICAgIG5ldyBMLkxhdExuZygtMzcuODIyMTQ4NzI3MTUwNywxNDQuOTYyMjI5MzYzNDcyMTIpLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGljb24gOiBuZXcgTC5JY29uLkRlZmF1bHQoKSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2JsdWUnLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLAogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyMwZjBmMGYnLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjcsCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZTaWRlczogNCwKICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmFkZFRvKG1hcF8wYjMxNWViMGExYTU0NGY3YThhZjU5OWI3OWE2ZDNhYik7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84NDVjZjZjZmJkOWY0ZGI1YmEyNzJiMTQyYTkyNTNiNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80Y2I5ZWU3NWYyNzg0MDk0YWVjMjcxMjdlZDUyYjgyNyA9ICQoJzxkaXYgaWQ9Imh0bWxfNGNiOWVlNzVmMjc4NDA5NGFlYzI3MTI3ZWQ1MmI4MjciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlBlbGxhcm9tYSBDYWZlIEJhcjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODQ1Y2Y2Y2ZiZDlmNGRiNWJhMjcyYjE0MmE5MjUzYjcuc2V0Q29udGVudChodG1sXzRjYjllZTc1ZjI3ODQwOTRhZWMyNzEyN2VkNTJiODI3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICByZWd1bGFyX3BvbHlnb25fbWFya2VyXzI2NGFhNmRhNzViMjRmZmFhODRiYjU5Y2E4ZTVlNTljLmJpbmRQb3B1cChwb3B1cF84NDVjZjZjZmJkOWY0ZGI1YmEyNzJiMTQyYTkyNTNiNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcmVndWxhcl9wb2x5Z29uX21hcmtlcl84NGM5NzE0YmE4ZTU0OTMwYTUyZTc3NGZjNjI0ZTI0MSA9IG5ldyBMLlJlZ3VsYXJQb2x5Z29uTWFya2VyKAogICAgICAgICAgICAgICAgbmV3IEwuTGF0TG5nKC0zNy44MjM2ODE3MjEwNTE3NTYsMTQ0Ljk2Nzg0NzAwNjQwNTgzKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpY29uIDogbmV3IEwuSWNvbi5EZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgICAgICAgIHdlaWdodDogMiwKICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjMGYwZjBmJywKICAgICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC43LAogICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2lkZXM6IDQsCiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAxMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5hZGRUbyhtYXBfMGIzMTVlYjBhMWE1NDRmN2E4YWY1OTliNzlhNmQzYWIpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYWY4ZjdmMDFhMGI2NDRhZDg4YmM2OTI4NTE3ZTJmYmQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzQ1MGMzOTdiNzk1NDkxMzljM2ZmZWE0ZmIzMTdhYTcgPSAkKCc8ZGl2IGlkPSJodG1sXzM0NTBjMzk3Yjc5NTQ5MTM5YzNmZmVhNGZiMzE3YWE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CbG9uZGllPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hZjhmN2YwMWEwYjY0NGFkODhiYzY5Mjg1MTdlMmZiZC5zZXRDb250ZW50KGh0bWxfMzQ1MGMzOTdiNzk1NDkxMzljM2ZmZWE0ZmIzMTdhYTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIHJlZ3VsYXJfcG9seWdvbl9tYXJrZXJfODRjOTcxNGJhOGU1NDkzMGE1MmU3NzRmYzYyNGUyNDEuYmluZFBvcHVwKHBvcHVwX2FmOGY3ZjAxYTBiNjQ0YWQ4OGJjNjkyODUxN2UyZmJkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciByZWd1bGFyX3BvbHlnb25fbWFya2VyXzAwNjNlZTY4Yjk0NTQyZmU4YmRhZmVmZDEyMGRhMGNmID0gbmV3IEwuUmVndWxhclBvbHlnb25NYXJrZXIoCiAgICAgICAgICAgICAgICBuZXcgTC5MYXRMbmcoLTM3LjgyMzc0NTE3OTIyMzU4NiwxNDQuOTY4MjAzNjI0MjA1OCksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWNvbiA6IG5ldyBMLkljb24uRGVmYXVsdCgpLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDIsCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzBmMGYwZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNywKICAgICAgICAgICAgICAgICAgICBudW1iZXJPZlNpZGVzOiA0LAogICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLAogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMTAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAuYWRkVG8obWFwXzBiMzE1ZWIwYTFhNTQ0ZjdhOGFmNTk5Yjc5YTZkM2FiKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U3NTQwYzgwYTgxOTRiMDg4MmJiOWIxOTBmOTQ5MDgzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzgxNGM2ZGQ2ZGY2ZDRmNTc5YmRkNDk2NjQ2ZDZmMTkzID0gJCgnPGRpdiBpZD0iaHRtbF84MTRjNmRkNmRmNmQ0ZjU3OWJkZDQ5NjY0NmQ2ZjE5MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U2NyaXB0IEJhciAmYW1wOyBCaXN0cm88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U3NTQwYzgwYTgxOTRiMDg4MmJiOWIxOTBmOTQ5MDgzLnNldENvbnRlbnQoaHRtbF84MTRjNmRkNmRmNmQ0ZjU3OWJkZDQ5NjY0NmQ2ZjE5Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgcmVndWxhcl9wb2x5Z29uX21hcmtlcl8wMDYzZWU2OGI5NDU0MmZlOGJkYWZlZmQxMjBkYTBjZi5iaW5kUG9wdXAocG9wdXBfZTc1NDBjODBhODE5NGIwODgyYmI5YjE5MGY5NDkwODMpOwoKICAgICAgICAgICAgCiAgICAgICAgCjwvc2NyaXB0Pg==\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7f7789e98940>"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# create map of Southbank Melbourne using latitude and longitude values\n",
    "map_sb = folium.Map(location=[latitude, longitude], zoom_start=20)\n",
    "\n",
    "# add markers to map\n",
    "for lat, lng, label in zip(SBnearby_venues['lat'], SBnearby_venues['lng'], SBnearby_venues['name']):\n",
    "    label = folium.Popup(label, parse_html=True)\n",
    "    folium.RegularPolygonMarker(\n",
    "        [lat, lng],\n",
    "        number_of_sides=4,\n",
    "        radius=10,\n",
    "        popup=label,\n",
    "        color='blue',\n",
    "        fill_color='#0f0f0f',\n",
    "        fill_opacity=0.7,\n",
    "    ).add_to(map_sb)  \n",
    "    \n",
    "map_sb"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3.6",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.8"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
